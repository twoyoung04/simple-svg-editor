{"version":3,"file":"index.js","mappings":"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","sources":["webpack://svg-editor/./src/index.css","webpack://svg-editor/./node_modules/css-loader/dist/runtime/api.js","webpack://svg-editor/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://svg-editor/webpack/bootstrap","webpack://svg-editor/webpack/runtime/compat get default export","webpack://svg-editor/webpack/runtime/define property getters","webpack://svg-editor/webpack/runtime/hasOwnProperty shorthand","webpack://svg-editor/webpack/runtime/nonce","webpack://svg-editor/./src/svgBoard/Vector.ts","webpack://svg-editor/./src/svgBoard/Board.ts","webpack://svg-editor/./src/svgBoard/Box.ts","webpack://svg-editor/./src/svgBoard/Log.ts","webpack://svg-editor/./src/svgBoard/Transform.ts","webpack://svg-editor/./src/svgBoard/Area.ts","webpack://svg-editor/./src/svgBoard/namespaces.ts","webpack://svg-editor/./src/svgBoard/utilities.ts","webpack://svg-editor/./src/svgBoard/BaseElement.ts","webpack://svg-editor/./src/svgBoard/Constant.ts","webpack://svg-editor/./src/svgBoard/Ellipse.ts","webpack://svg-editor/./src/svgBoard/EventEmitter.ts","webpack://svg-editor/./src/svgBoard/Rect.ts","webpack://svg-editor/./src/svgBoard/Manager.ts","webpack://svg-editor/./src/svgBoard/Selector.ts","webpack://svg-editor/./src/svgBoard/MouseStatusManager.ts","webpack://svg-editor/./src/index.css?cfe4","webpack://svg-editor/./src/index.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"html,\\nbody {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.cursor-crosshair {\\n  cursor: crosshair;\\n}\\n.cursor-pointer {\\n  cursor: pointer;\\n}\\n.cursor-default {\\n  cursor: default;\\n}\\n.cursor-grab {\\n  cursor: grab;\\n}\\n.cursor-resize {\\n  cursor: nwse-resize;\\n}\\n.cursor-move {\\n  cursor: move;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/index.css\"],\"names\":[],\"mappings\":\"AAAA;;EAEE,SAAS;EACT,UAAU;AACZ;;AAEA;EACE,iBAAiB;AACnB;AACA;EACE,eAAe;AACjB;AACA;EACE,eAAe;AACjB;AACA;EACE,YAAY;AACd;AACA;EACE,mBAAmB;AACrB;AACA;EACE,YAAY;AACd\",\"sourcesContent\":[\"html,\\nbody {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.cursor-crosshair {\\n  cursor: crosshair;\\n}\\n.cursor-pointer {\\n  cursor: pointer;\\n}\\n.cursor-default {\\n  cursor: default;\\n}\\n.cursor-grab {\\n  cursor: grab;\\n}\\n.cursor-resize {\\n  cursor: nwse-resize;\\n}\\n.cursor-move {\\n  cursor: move;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nc = undefined;","import { Transform } from \"./Transform\"\n\nexport class Vector2 {\n  private _x: number\n  public get x(): number {\n    return this._x\n  }\n  public set x(value: number) {\n    this._x = value\n  }\n  private _y: number\n  public get y(): number {\n    return this._y\n  }\n  public set y(value: number) {\n    this._y = value\n  }\n  public get mod() {\n    return Math.sqrt(this.x * this.x + this.y * this.y)\n  }\n\n  constructor(x: number, y: number) {\n    this._x = x\n    this._y = y\n  }\n\n  public static ones() {\n    return new Vector2(1, 1)\n  }\n  public static zeros() {\n    return new Vector2(0, 0)\n  }\n  public add(v: Vector2) {\n    this._x += v.x\n    this._y += v.y\n    return this\n  }\n  public subtract(v: Vector2) {\n    this._x -= v.x\n    this._y -= v.y\n    return this\n  }\n  public dotMultiply(v: Vector2) {\n    this._x *= v.x\n    this._y *= v.y\n    return this\n  }\n\n  public crossMultiply(v: Vector2) {\n    return this._x * v.y - this._y * v.x\n  }\n\n  public angle(v: Vector2) {\n    return Math.acos(\n      Math.min((this._x * v.x + this._y * v.y) / this.mod / v.mod, 1)\n    )\n  }\n\n  public distance(v: Vector2) {\n    return Math.sqrt(Math.pow(this.x - v.x, 2) + Math.pow(this.y - v.y, 2))\n  }\n\n  public rotateAtOrigin(theta: number) {\n    let [x, y] = [\n      this.x * Math.cos(theta) - this.y * Math.sin(theta),\n      this.x * Math.sin(theta) + this.y * Math.cos(theta),\n    ]\n    this.x = x\n    this.y = y\n    return this\n  }\n\n  public applyTransform(transform: Transform) {\n    const { a, b, c, d, e, f } = transform\n    let [x, y] = [a * this.x + c * this.y + e, b * this.x + d * this.y + f]\n    this.x = x\n    this.y = y\n    return this\n  }\n\n  public opposite() {\n    return new Vector2(-this._x, -this._y)\n  }\n\n  public clone() {\n    return new Vector2(this.x, this.y)\n  }\n}\n","import { BaseElement } from \"./BaseElement\"\nimport { ELLIPSE } from \"./Ellipse\"\nimport { BoardEvent, EventEmitter } from \"./EventEmitter\"\nimport { NS } from \"./namespaces\"\nimport { Rect } from \"./Rect\"\nimport { generateSvgElement, setAttr } from \"./utilities\"\nimport { Selector } from \"./Selector\"\nimport { Log } from \"./Log\"\nimport { Area } from \"./Area\"\nimport { Box } from \"./Box\"\nimport { Transform } from \"./Transform\"\nimport { Vector2 } from \"./Vector\"\nimport { MouseStatusManager } from \"./MouseStatusManager\"\n\nexport class Board {\n  private saveOptions: any\n  private _selection: BaseElement[]\n  fx: number\n  fy: number\n  public get selection(): BaseElement[] {\n    return this._selection\n  }\n  public set selection(value: BaseElement[]) {\n    this._selection = value\n  }\n  private _selectionArea: Area\n  public get selectionArea(): Area {\n    return this._selectionArea\n  }\n  public set selectionArea(value: Area) {\n    this._selectionArea = value\n  }\n  private plugins: any[]\n  private currentMode: EditorMode\n  private currentResizeMode: ResizeMode\n  private rubberBox: HTMLElement\n  private curBBoxes: any[]\n  private selector: Selector\n  private _container: HTMLElement\n  public get container(): HTMLElement {\n    return this._container\n  }\n  public set container(value: HTMLElement) {\n    this._container = value\n  }\n  private _elements: BaseElement[]\n  public get elements(): BaseElement[] {\n    return this._elements\n  }\n  public set elements(value: BaseElement[]) {\n    this._elements = value\n  }\n  private _svgdoc: Document\n  private _eventEmitter: EventEmitter\n  private _cachedEvent: BoardEvent\n\n  private mouseStatusManager: MouseStatusManager\n\n  private boardX = 0\n  private boardY = 0\n\n  // mouse relative\n  // @todo: maybe not need this\n  private MouseDown = false\n  private mouseStartX = 0\n  private mouseStartY = 0\n  private lastZIndex = 0\n  private currentCreateMode: CreateMode\n\n  public get eventEmitter(): EventEmitter {\n    return this._eventEmitter\n  }\n  public set eventEmitter(value: EventEmitter) {\n    this._eventEmitter = value\n  }\n  public get svgdoc(): Document {\n    return this._svgdoc\n  }\n  public set svgdoc(value: Document) {\n    this._svgdoc = value\n  }\n  private _svgroot: SVGElement\n  public get svgroot(): SVGElement {\n    return this._svgroot\n  }\n  public set svgroot(value: SVGElement) {\n    this._svgroot = value\n  }\n  private svgcontent: SVGElement\n  public static idPrefix = \"svg\"\n  private curConfig: any\n  private canvasBg: SVGElement\n\n  // @todo: 此处存放一些交互时需要暂存的信息，后续看下怎么优化\n  private selectionTransforms: Transform[]\n  private lastFrameWidth: number\n  private lastFrameHeight: number\n\n  constructor(container: HTMLElement) {\n    this.saveOptions = {}\n    this.selection = []\n    this.selectionArea = new Area(new Box(0, 0, 1, 1), Transform.identity())\n    this.plugins = []\n    this.currentMode = EditorMode.SELECT\n    this.currentResizeMode = ResizeMode.CASUAL\n    this.rubberBox = null\n    this.curBBoxes = []\n    this.curConfig = {\n      dimensions: [800, 600],\n    }\n    this.elements = []\n    this.selectionTransforms = []\n\n    this._eventEmitter = new EventEmitter()\n    this._cachedEvent = new BoardEvent(\"\", null)\n    this.mouseStatusManager = new MouseStatusManager(this)\n\n    this.container = container\n    this.svgdoc = document\n\n    this.updateBoardPosition()\n\n    this.svgroot = this.svgdoc.createElementNS(NS.SVG, \"svg\") as SVGElement\n\n    const svgAttributs = {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      id: \"svgroot\",\n      xlinks: \"http://www.w3.org/1999/xlink\",\n      width: this.curConfig.dimensions[0],\n      height: this.curConfig.dimensions[1],\n      overflow: \"visible\",\n    }\n    Object.keys(svgAttributs).forEach((key) => {\n      this.svgroot.setAttribute(key, svgAttributs[key])\n    })\n\n    const bgAttributes = {\n      id: \"svgBg\",\n      width: this.curConfig.dimensions[0],\n      height: this.curConfig.dimensions[1],\n      stroke: \"#000\",\n      fill: \"#fbfbfb\",\n      style: \"pointer-events: none\",\n    }\n    this.canvasBg = generateSvgElement(this._svgdoc, bgAttributes)\n\n    const rect = this.svgdoc.createElementNS(NS.SVG, \"rect\") as SVGRectElement\n    const rectAttributes = {\n      id: \"blabla\",\n      width: \"100%\",\n      height: \"100%\",\n      stroke: \"#000\",\n      fill: \"#f8f8f8\",\n      style: \"pointer-events: none\",\n      x: 0,\n      y: 0,\n    }\n    Object.keys(rectAttributes).forEach((key) => {\n      rect.setAttribute(key, rectAttributes[key])\n    })\n    this.canvasBg.append(rect)\n\n    this.svgcontent = generateSvgElement(this.svgdoc, {\n      ...svgAttributs,\n      id: \"svgcontent\",\n    })\n\n    this.svgroot.append(this.canvasBg)\n    this.svgroot.append(this.svgcontent)\n    this.container.append(this.svgroot)\n\n    this.initSelector()\n\n    this.initEventHandler()\n    this.initCustomEventHandler()\n\n    // @todo: 传递画板的引用给元素，有没有更好的办法？？\n    ;(window as any).board = this\n  }\n\n  private initSelector() {\n    this.selector = new Selector(this)\n  }\n\n  private initEventHandler() {\n    // @todo: maybe 需要监听画板是否加载完成，后续优化\n    this.container.addEventListener(\n      \"mousedown\",\n      this.handleMouseDown.bind(this)\n    )\n    this.container.addEventListener(\"mouseup\", this.handleMouseUp.bind(this))\n    this.container.addEventListener(\"click\", this.handleClick.bind(this))\n    this.container.addEventListener(\"dblclick\", this.handleDBClick.bind(this))\n    this.container.addEventListener(\n      \"mousemove\",\n      this.handleMouseMove.bind(this)\n    )\n    document.addEventListener(\"resize\", () => {\n      this.updateBoardPosition()\n    })\n    this.container.addEventListener(\"keydown\", this.handleKeyDown.bind(this))\n  }\n\n  private initCustomEventHandler() {\n    this._eventEmitter.on(\"selectStart\", this.onSelectStart.bind(this))\n    this._eventEmitter.on(\"createElement\", this.onCreateElement.bind(this))\n    this._eventEmitter.on(\"creating\", this.onCreateMove.bind(this))\n    this._eventEmitter.on(\"createEnd\", this.onCreateEnd.bind(this))\n    this._eventEmitter.on(\"changeMode\", this.onChangeMode.bind(this))\n    this._eventEmitter.on(\"dragStart\", this.onDragStart.bind(this))\n    this._eventEmitter.on(\"draging\", this.onDraging.bind(this))\n    this._eventEmitter.on(\"dragEnd\", this.onDragEnd.bind(this))\n    this._eventEmitter.on(\"rotateStart\", this.onRotateStart.bind(this))\n    this._eventEmitter.on(\"rotating\", this.onRotating.bind(this))\n    this._eventEmitter.on(\"rotateEnd\", this.onRotateEnd.bind(this))\n    this._eventEmitter.on(\"scaleStart\", this.onScaleStart.bind(this))\n    this._eventEmitter.on(\"scaling\", this.onScaling.bind(this))\n    this._eventEmitter.on(\"scaleEnd\", this.onScaleEnd.bind(this))\n    this._eventEmitter.on(\n      \"mouseStatusChange\",\n      this.onMouseStatusChange.bind(this)\n    )\n    // 封装一层，获取鼠标相对 x,y\n    this._eventEmitter.on(\"mouseDown\", this.onMouseDown.bind(this))\n    this._eventEmitter.on(\"mouseMove\", this.onMouseMove.bind(this))\n    this._eventEmitter.on(\"mouseUp\", this.onMouseUp.bind(this))\n  }\n\n  private updateBoardPosition() {\n    let bbox = this.container.getBoundingClientRect()\n    this.boardX = bbox.x\n    this.boardY = bbox.y\n  }\n\n  public exportSvg(): string {\n    return \"\"\n  }\n\n  // @todo: 这个方法修饰符应该设置成 private or protected\n  public setSelected(elements: BaseElement[]) {\n    console.log(elements)\n    this.selection = elements\n    let eventType = \"elementSelected\"\n    if (!elements || elements.length == 0) {\n      eventType = \"nothingSelected\"\n    } else {\n      // elements.forEach((e) => console.log(e.id, e.transform.a))\n      this.updateSelectionArea()\n      this._cachedEvent.customData = {\n        elements,\n        area: this.selectionArea,\n      }\n    }\n    // @todo: create new events derived from BoardEvent\n    this._eventEmitter.trigger(eventType, [this._cachedEvent])\n  }\n\n  private setMode(mode: EditorMode) {\n    this.currentMode = mode\n    this._cachedEvent.customData = {\n      mode,\n    }\n    this._eventEmitter.trigger(\"changeMode\", [this._cachedEvent])\n  }\n\n  private updateSelectionArea() {\n    let elements = this.selection\n    // calculate area\n    if (elements.length == 1) {\n      this.selectionArea.transform = elements[0].transform.clone()\n      this.selectionArea.box = new Box(0, 0, 1, 1)\n    } else {\n      this.selectionArea.transform.reset()\n      this.selectionArea.box = Box.mergeAll(elements.map((e) => e.AABB))\n      // console.log(elements[0].transform)\n      // console.log(elements[1].transform)\n      // console.log(elements.map((e) => e.AABB))\n      // console.log(this.selectionArea.box)\n    }\n  }\n\n  // original events\n  protected handleMouseDown(e: MouseEvent) {\n    this.mouseStartX = e.clientX - this.boardX\n    this.mouseStartY = e.clientY - this.boardY\n\n    this._cachedEvent.mouseEvent = e\n    this._cachedEvent.customData || (this._cachedEvent.customData = {})\n    this._cachedEvent.customData.x = this.mouseStartX\n    this._cachedEvent.customData.y = this.mouseStartY\n    this._eventEmitter.trigger(\"mouseDown\", [this._cachedEvent])\n  }\n  protected handleMouseMove(e: MouseEvent) {\n    let [x, y] = [e.clientX - this.boardX, e.clientY - this.boardY]\n    this._cachedEvent.mouseEvent = e\n\n    this._cachedEvent.customData || (this._cachedEvent.customData = {})\n    this._cachedEvent.customData.x = x\n    this._cachedEvent.customData.y = y\n    this._eventEmitter.trigger(\"mouseMove\", [this._cachedEvent])\n  }\n  protected handleMouseUp(e: MouseEvent) {\n    this._cachedEvent.mouseEvent = e\n    this._cachedEvent.customData.x = e.clientX - this.boardX\n    this._cachedEvent.customData.y = e.clientY - this.boardY\n    this._eventEmitter.trigger(\"mouseUp\", [this._cachedEvent])\n  }\n  protected handleClick(e: MouseEvent) {}\n  protected handleDBClick(e: MouseEvent) {}\n  protected handleKeyDown(e: KeyboardEvent) {\n    switch (e.key) {\n      case \"r\":\n        this.setMode(EditorMode.CREATE)\n        this.currentCreateMode = CreateMode.RECT\n        break\n      case \"o\":\n        this.setMode(EditorMode.CREATE)\n        this.currentCreateMode = CreateMode.ELLIPSE\n        break\n      case \"l\":\n        this.setMode(EditorMode.CREATE)\n        this.currentCreateMode = CreateMode.LINE\n        break\n      case \"v\":\n        this.setMode(EditorMode.SELECT)\n        this.currentCreateMode = CreateMode.LINE\n        break\n    }\n  }\n\n  // custom events\n  private onMouseDown(e: BoardEvent) {\n    console.log(\"function onMouseDown...\")\n    this.MouseDown = true\n    if (this.currentMode === EditorMode.CREATE) {\n      this._cachedEvent.name = \"createElement\"\n      this._cachedEvent.customData = {\n        type: this.currentCreateMode,\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n      }\n      this._eventEmitter.trigger(\"createElement\", [this._cachedEvent])\n      return\n    }\n    console.log(\"not create mode...\")\n    if (this.mouseStatusManager.mouseStatus == MouseStatus.ROTATE) {\n      this.setMode(EditorMode.ROTATE)\n      return\n    }\n    console.log(\"not rotate mode...\")\n    if (this.mouseStatusManager.mouseStatus == MouseStatus.SCALE) {\n      this.setMode(EditorMode.SCALE)\n      return\n    }\n    console.log(\"not scale mode...\")\n    // 若点击在选中物体范围内则进入拖拽模式(enter drag mode if mouse down on the selected area)\n    if (\n      this.selection &&\n      this.selection.length >= 1 &&\n      this.clickOnSelectedArea(e)\n    ) {\n      this.setMode(EditorMode.DRAG)\n    } else {\n      if (\n        this.clickOnElement(new Vector2(this.mouseStartX, this.mouseStartY))\n      ) {\n        this.setMode(EditorMode.DRAG)\n      } else {\n        this.setMode(EditorMode.SELECT)\n        this._cachedEvent.name = \"selectStart\"\n        this._eventEmitter.trigger(\"selectStart\", [this._cachedEvent])\n      }\n    }\n  }\n  private onMouseMove(e: BoardEvent) {\n    if (this.currentMode === EditorMode.CREATE && this.MouseDown) {\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.customData.x,\n        endY: e.customData.y,\n      }\n      this._eventEmitter.trigger(\"creating\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.DRAG) {\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.customData.x,\n        endY: e.customData.y,\n      }\n      this._eventEmitter.trigger(\"draging\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.ROTATE) {\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.customData.x,\n        endY: e.customData.y,\n      }\n      this._eventEmitter.trigger(\"rotating\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.SCALE) {\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.customData.x,\n        endY: e.customData.y,\n      }\n      this._eventEmitter.trigger(\"scaling\", [this._cachedEvent])\n    } else if (this.MouseDown) {\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.customData.x,\n        endY: e.customData.y,\n      }\n      this._eventEmitter.trigger(\"selectMove\", [this._cachedEvent])\n    }\n  }\n  private onMouseUp(e: BoardEvent) {\n    this.MouseDown = false\n    if (this.currentMode === EditorMode.CREATE) {\n      this._eventEmitter.trigger(\"createEnd\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.SELECT) {\n      this._eventEmitter.trigger(\"selectEnd\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.ROTATE) {\n      this._eventEmitter.trigger(\"rotateEnd\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.DRAG) {\n      this._eventEmitter.trigger(\"dragEnd\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.SCALE) {\n      this._eventEmitter.trigger(\"scaleEnd\", [this._cachedEvent])\n    }\n    this.currentMode = EditorMode.SELECT\n  }\n\n  private onSelectStart(e: BoardEvent) {}\n  private onSelectMove(e: BoardEvent) {}\n  private onSelectEnd(e: BoardEvent) {}\n\n  private onCreateElement(e: BoardEvent) {\n    const { mouseEvent, customData } = e\n    console.log(customData.type)\n    switch (customData.type) {\n      case CreateMode.RECT:\n        let rect = new Rect(customData.startX, customData.startY, 0, 0)\n        this.svgcontent.append(rect.domInstance)\n        this.elements.push(rect)\n        this.setSelected([rect])\n        break\n      case CreateMode.ELLIPSE:\n        let ellipse = new ELLIPSE(customData.startX, customData.startY, 0, 0)\n        this.svgcontent.append(ellipse.domInstance)\n        this.elements.push(ellipse)\n        this.setSelected([ellipse])\n        break\n      default:\n        Log.Error(\"error insert mode\")\n    }\n  }\n  private onCreateMove(e: BoardEvent) {\n    this.updateSelectionArea()\n    console.log(this.selection)\n    if (this.container.className) this.container.className = \"\"\n    console.log(\"handle create move...\")\n    const { mouseEvent, customData } = e\n    let [width, height] = [\n      Math.abs(customData.endX - customData.startX),\n      Math.abs(customData.endY - customData.startY),\n    ]\n    console.log(width, height)\n    // 元素的实际位置和大小由 Box（0，0，1，1）与 transform 结合表示\n    this.selection[0].transform.a = width\n    this.selection[0].transform.d = height\n    this.selection[0].transform.e = Math.min(customData.endX, customData.startX)\n    this.selection[0].transform.f = Math.min(customData.endY, customData.startY)\n    this.selection[0].updateRendering()\n  }\n  private onCreateEnd(e: BoardEvent) {\n    console.log(\"create element end...\")\n  }\n  private onDragStart(e: BoardEvent) {}\n  private onDraging(e: BoardEvent) {\n    const { mouseEvent, customData } = e\n    const { startX, startY, endX, endY } = customData\n    // @todo: 需要记录 drag 之前的 transform 信息\n    this.selection.forEach((n, index) => {\n      n.transform.e = this.selectionTransforms[index].e + endX - startX\n      n.transform.f = this.selectionTransforms[index].f + endY - startY\n      n.updateRendering()\n    })\n    this.updateSelectionArea()\n  }\n  private onDragEnd(e: BoardEvent) {}\n\n  private onRotateStart(e: BoardEvent) {}\n  private onRotating(e: BoardEvent) {\n    const { mouseEvent, customData } = e\n    const { startX, startY, endX, endY } = customData\n    let center = this.selectionArea.center()\n    let a = new Vector2(startX - center.x, startY - center.y)\n    let b = new Vector2(endX - center.x, endY - center.y)\n    let theta = a.angle(b)\n    let flag = a.crossMultiply(b)\n\n    theta = flag > 0 ? theta : Math.PI * 2 - theta\n    console.log((theta / Math.PI) * 180)\n    this.selection.forEach((n, index) => {\n      n.transform.copy(\n        this.selectionTransforms[index].clone().rotate(theta, center)\n      )\n      n.updateRendering()\n    })\n  }\n  private onRotateEnd(e: BoardEvent) {\n    this.updateSelectionArea()\n  }\n\n  private onScaleStart(e: BoardEvent) {\n    // @todo: 还没考虑多选情况\n    this.lastFrameWidth = this.selection[0].frameWidth\n    this.lastFrameHeight = this.selection[0].frameHeight\n    let fx = 1\n    let fy = 1\n    switch (this.mouseStatusManager.cornerType) {\n      default:\n      case DIRECTION.RB:\n        break\n      case DIRECTION.RT:\n        fy = -1\n        break\n      case DIRECTION.LB:\n        fx = -1\n        break\n      case DIRECTION.LT:\n        fx = fy = -1\n        break\n    }\n    this.fx = fx\n    this.fy = fy\n  }\n  private onScaling(e: BoardEvent) {\n    const { mouseEvent, customData } = e\n    const { startX, startY, endX, endY } = customData\n    let start = new Vector2(startX, startY)\n    let end = new Vector2(endX, endY)\n\n    let fx = this.fx\n    let fy = this.fy\n\n    // @todo: 目前都是相对于自己的左上角缩放\n    this.selection.forEach((n, index) => {\n      let a = start\n        .clone()\n        .applyTransform(this.selectionTransforms[index].inverse())\n      let b = end\n        .clone()\n        .applyTransform(this.selectionTransforms[index].inverse())\n      b.subtract(a)\n\n      // !!! @todo: avoid the value become 0\n      let [x, y] = [fx * b.x + 1, fy * b.y + 1]\n      let [absx, absy] = [\n        Math.max(Math.abs(x), 0.001),\n        Math.max(Math.abs(y), 0.001),\n      ]\n      x = x < 0 ? -absx : absx\n      y = y < 0 ? -absy : absy\n      // @todo: 计算各种情况，此处仅仅计算了左上角\n      n.transform.copy(\n        this.selectionTransforms[index]\n          .clone()\n          .scale(x, y, new Vector2(fx == -1 ? 1 : 0, fy == -1 ? 1 : 0))\n      )\n      n.updateRendering()\n    })\n\n    // this.updateSelectionArea()\n  }\n  private onScaleEnd(e: BoardEvent) {\n    this.updateSelectionArea()\n  }\n\n  private onChangeMode(e: BoardEvent) {\n    const { customData } = e\n    console.log(\"change mode:\", customData.mode)\n    if (customData.mode === EditorMode.SELECT) {\n      this.setSelected([])\n    } else if (this.currentMode === EditorMode.CREATE) {\n      this.container.className = \"cursor-crosshair\"\n    } else if (this.currentMode == EditorMode.DRAG) {\n      this.selectionTransforms = this.selection.map((n) => n.transform.clone())\n      this._cachedEvent.customData = {\n        transforms: this.selectionTransforms,\n      }\n      this._eventEmitter.trigger(\"dragStart\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.ROTATE) {\n      this.selectionTransforms = this.selection.map((n) => n.transform.clone())\n      this._cachedEvent.customData = {\n        transforms: this.selectionTransforms,\n      }\n      this._eventEmitter.trigger(\"rotateStart\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.SCALE) {\n      this.selectionTransforms = this.selection.map((n) => n.transform.clone())\n      this._cachedEvent.customData = {\n        transforms: this.selectionTransforms,\n      }\n      this._eventEmitter.trigger(\"scaleStart\", [this._cachedEvent])\n    }\n  }\n\n  private onMouseStatusChange(e: BoardEvent) {}\n\n  private clickOnSelectedArea(e: BoardEvent) {\n    return this.selectionArea.include(\n      new Vector2(e.customData.x, e.customData.y)\n    )\n  }\n\n  private clickOnElement(pos) {\n    // @todo: 给每个元素设置一个 Area 属性\n    let element = this.elements\n      .sort((a, b) => (a.zIndex > b.zIndex ? 1 : -1))\n      .find((e) => {\n        return new Area(new Box(0, 0, 1, 1), e.transform).include(pos)\n      })\n    this.setSelected(element ? [element] : [])\n    console.log(\"into function clickONElement\")\n    element && console.log(\"click on:\", element.id)\n    return !!element\n  }\n}\n\nexport enum EditorMode {\n  SELECT = \"SELECT\",\n  DRAG = \"DRAG\",\n  ROTATE = \"ROTATE\",\n  SCALE = \"SCALE\",\n  CREATE = \"CREATE\",\n  DRAW = \"DRAW\",\n}\n\nexport enum CreateMode {\n  RECT = \"RECT\",\n  ELLIPSE = \"ELLIPsE\",\n  LINE = \"LINE\",\n}\n\nexport enum ResizeMode {\n  CASUAL,\n  SCALE,\n}\n\nexport enum MouseStatus {\n  SELECT = \"SELECT\",\n  DRAG = \"DRAG\",\n  SCALE = \"SCALE\",\n  ROTATE = \"ROTATE\",\n}\n\nexport enum DIRECTION {\n  LT,\n  LM,\n  LB,\n  CT,\n  CM,\n  CB,\n  RT,\n  RM,\n  RB,\n}\n","import { Vector2 } from \"./Vector\"\n\nexport class Box {\n  private _x: number\n  public get x(): number {\n    return this._x\n  }\n  public set x(value: number) {\n    this._x = value\n  }\n  private _y: number\n  public get y(): number {\n    return this._y\n  }\n  public set y(value: number) {\n    this._y = value\n  }\n  private _w: number\n  public get w(): number {\n    return this._w\n  }\n  public set w(value: number) {\n    this._w = value\n  }\n  private _h: number\n  public get h(): number {\n    return this._h\n  }\n  public set h(value: number) {\n    this._h = value\n  }\n  public get x2(): number {\n    return this._x + this._w\n  }\n  public get y2(): number {\n    return this._y + this._h\n  }\n  constructor(x: number, y: number, w: number, h: number) {\n    this.x = x\n    this.y = y\n    this.w = w\n    this.h = h\n  }\n  public set(box: Box) {\n    this.x = box.x\n    this.y = box.y\n    this.w = box.w\n    this.h = box.h\n  }\n  public set4(x: number, y: number, w: number, h: number) {\n    this.x = x\n    this.y = y\n    this.w = w\n    this.h = h\n  }\n  public setSize(w: number, h: number) {\n    this.w = w\n    this.h = h\n  }\n  public merge(box: Box) {}\n  public static mergeAll(boxes: Box[]) {\n    debugger\n    if (boxes.length == 0) return null\n    if (boxes.length == 1) return boxes[0]\n    let minx = Math.min(...boxes.map((b) => b.x))\n    let maxx = Math.max(...boxes.map((b) => b.x + b.w))\n    let miny = Math.min(...boxes.map((b) => b.y))\n    let maxy = Math.max(...boxes.map((b) => b.y + b.h))\n    return new Box(minx, miny, maxx - minx, maxy - miny)\n  }\n\n  public center() {\n    return new Vector2(this.x + this.w / 2, this.y + this.h / 2)\n  }\n\n  public toVector2() {\n    return [\n      new Vector2(this.x, this.y),\n      new Vector2(this.x, this.y2),\n      new Vector2(this.x2, this.y2),\n      new Vector2(this.x2, this.y),\n    ]\n  }\n}\n","export class Log {\n  public static Error(message: string) {\n    console.error(message);\n  }\n\n  public static blue(message: string) {\n    console.info(\"%c \" + message, \"color:blue;\");\n  }\n  public static red(message: string) {\n    console.info(\"%c \" + message, \"color:red;\");\n  }\n}\n","import { Vector2 } from \"./Vector\"\n\nexport class Transform {\n  public a: number\n  public b: number\n  public c: number\n  public d: number\n  public e: number\n  public f: number\n\n  constructor(\n    a: number,\n    b: number,\n    c: number,\n    d: number,\n    e: number,\n    f: number\n  ) {\n    this.a = a\n    this.b = b\n    this.c = c\n    this.d = d\n    this.e = e\n    this.f = f\n  }\n\n  public static identity() {\n    return new Transform(1, 0, 0, 1, 0, 0)\n  }\n  public static from(o: TransformLike) {\n    return new Transform(o.a, o.b, o.c, o.d, o.e, o.f)\n  }\n  public set(o: TransformLike) {\n    this.a = o.a\n    this.b = o.b\n    this.c = o.c\n    this.d = o.d\n    this.e = o.e\n    this.f = o.f\n  }\n  public setFromArray(arr: number[]) {\n    this.a = arr[0]\n    this.b = arr[1]\n    this.c = arr[2]\n    this.d = arr[3]\n    this.e = arr[4]\n    this.f = arr[5]\n  }\n  public copy(t: Transform) {\n    this.a = t.a\n    this.b = t.b\n    this.c = t.c\n    this.d = t.d\n    this.e = t.e\n    this.f = t.f\n    return this\n  }\n  public clone() {\n    return Transform.from(this)\n  }\n  public reset() {\n    this.a = 1\n    this.b = 0\n    this.c = 0\n    this.d = 1\n    this.e = 0\n    this.f = 0\n    return this\n  }\n\n  public translate(v: Vector2) {\n    return this.translate2(v.x, v.y)\n  }\n  public translate2(x: number, y: number) {\n    this.e += x\n    this.f += y\n    return this\n    // return this.rightMultiply(new Transform(1, 0, 0, 1, x, y))\n  }\n  // @todo: 写该类的测试\n  public rotateAtOrigin(radius: number) {\n    let [sina, cosa] = [Math.sin(radius), Math.cos(radius)]\n    return this.rightMultiply(new Transform(cosa, sina, -sina, cosa, 0, 0))\n  }\n  public rotate(radius: number, p: Vector2) {\n    // T1 * R * T2 * CTM（平移旋转再平移）\n    return this.translate(Vector2.zeros().subtract(p))\n      .rotateAtOrigin(radius)\n      .translate(p)\n  }\n\n  public scale(x: number, y: number, p: Vector2) {\n    return this.copy(\n      Transform.identity()\n        .translate(p.opposite())\n        .scaleAtOrigin(x, y)\n        .translate(p)\n        .rightMultiply(this)\n    )\n  }\n  public scaleAtOrigin(x, y) {\n    this.a *= x\n    this.e *= x\n    this.d *= y\n    this.f *= y\n    return this\n  }\n\n  public flipY() {\n    const { a, b, c, d, e, f } = this\n    let [x, y] = [1 / 2, 1 / 2]\n    let [x1, y1] = [a * x + c * y + e, b * x + d * y + f]\n    this.rightMultiply(new Transform(-1, 0, 0, 1, 0, 0)).translate2(2 * x1, 0)\n    return this\n  }\n\n  // 原矩阵在右边👉\n  public rightMultiply(tm: Transform) {\n    let a = tm.a * this.a + tm.c * this.b\n    let b = tm.b * this.a + tm.d * this.b\n    let c = tm.a * this.c + tm.c * this.d\n    let d = tm.b * this.c + tm.d * this.d\n    let e = tm.a * this.e + tm.c * this.f + tm.e\n    let f = tm.b * this.e + tm.d * this.f + tm.f\n    this.a = a\n    this.b = b\n    this.c = c\n    this.d = d\n    this.e = e\n    this.f = f\n    return this\n  }\n  public leftMultiply(tm: Transform) {}\n\n  // 矩阵的逆\n  public inverse() {\n    let { a, b, c, d, e, f } = this\n    let detA = a * d - b * c\n    return new Transform(\n      d / detA,\n      -b / detA,\n      -c / detA,\n      a / detA,\n      (c * f - d * e) / detA,\n      (b * e - a * f) / detA\n    )\n  }\n\n  // @todo: 放在此处不太规范，耦合性太强\n  public cssString() {\n    return `matrix(${this.a},${this.b},${this.c},${this.d},${this.e},${this.f})`\n  }\n}\n\ninterface TransformLike {\n  a: number\n  b: number\n  c: number\n  d: number\n  e: number\n  f: number\n}\n\nexport class Matrix {}\n","import { Box } from \"./Box\"\nimport { Transform } from \"./Transform\"\nimport { Vector2 } from \"./Vector\"\n\nexport class Area {\n  private _box: Box\n  public get box(): Box {\n    return this._box\n  }\n  public set box(value: Box) {\n    this._box = value\n  }\n  private _transform: Transform\n  public get transform(): Transform {\n    return this._transform\n  }\n  public set transform(value: Transform) {\n    this._transform = value\n  }\n  constructor(box: Box, tranform: Transform) {\n    this.box = box\n    this.transform = tranform\n  }\n\n  public include(p: Vector2) {\n    // @todo: finish this with transform\n    let pp = p.clone().applyTransform(this._transform.inverse())\n    // debugger\n    return (\n      pp.x < this.box.x2 &&\n      pp.x > this.box.x &&\n      pp.y < this.box.y2 &&\n      pp.y > this.box.y\n    )\n  }\n\n  public nearestCornerDistance(p: Vector2) {\n    // 逆时针顺序\n    let corners = [\n      new Vector2(this.box.x, this.box.y),\n      new Vector2(this.box.x, this.box.y2),\n      new Vector2(this.box.x2, this.box.y2),\n      new Vector2(this.box.x2, this.box.y),\n    ]\n    let distances = corners\n      .map((c) => c.applyTransform(this._transform))\n      .map((c) => c.distance(p))\n    return distances\n  }\n\n  public center() {\n    return this.box.center().clone().applyTransform(this.transform)\n  }\n}\n","export const NS = {\n  HTML: \"http://www.w3.org/1999/xhtml\",\n  MATH: \"http://www.w3.org/1998/Math/MathML\",\n  SE: \"http://svg-edit.googlecode.com\",\n  SVG: \"http://www.w3.org/2000/svg\",\n  XLINK: \"http://www.w3.org/1999/xlink\",\n  OI: \"http://www.optimistik.fr/namespace/svg/OIdata\",\n  XML: \"http://www.w3.org/XML/1998/namespace\",\n  XMLNS: \"http://www.w3.org/2000/xmlns/\", // see http://www.w3.org/TR/REC-xml-names/#xmlReserved\n};\n","import { NS } from \"./namespaces\"\n\nexport const generateSvgElement = (docuemnt: Document, attributes?: any) => {\n  let ele = docuemnt.createElementNS(NS.SVG, \"svg\") as SVGElement\n  if (!attributes) return\n  Object.keys(attributes).forEach((key) => {\n    ele.setAttribute(key, attributes[key])\n  })\n  return ele\n}\n\nexport const setAttr = (element: Element, attr: any) => {\n  Object.keys(attr).forEach((key) => {\n    element.setAttribute(key, attr[key])\n  })\n}\n\nlet id = 100000\n\nexport const generateId = () => {\n  return \"node-\" + id++\n}\n","import { Box } from \"./Box\"\nimport { Board } from \"./Board\"\nimport { Log } from \"./Log\"\nimport { Transform } from \"./Transform\"\nimport { Vector2 } from \"./Vector\"\nimport { Area } from \"./Area\"\nimport { generateId } from \"./utilities\"\n\nexport abstract class BaseElement {\n  protected _id: string\n  public get id(): string {\n    return this._id\n  }\n  public set id(value: string) {\n    this._id = value\n  }\n  protected board: Board\n  protected _area: Area\n  public get area(): Area {\n    return this._area\n  }\n  public set area(value: Area) {\n    this._area = value\n  }\n  protected _domInstance: SVGElement\n  public get domInstance(): SVGElement {\n    if (!this._domInstance) this.createDomInstance()\n    return this._domInstance\n  }\n  public set domInstance(value: SVGElement) {\n    this._domInstance = value\n  }\n  public get frameWidth(): number {\n    return this.transform.a\n  }\n  public get frameHeight(): number {\n    return this.transform.d\n  }\n  protected absoluteBBox: Box\n  protected _transform: Transform\n  public get transform(): Transform {\n    return this._transform\n  }\n  public set transform(value: Transform) {\n    this._transform = value\n  }\n  // 元素的 AABB 框，在对元素进行变换时需要更新\n  private _AABB: Box\n  public get AABB(): Box {\n    return this._AABB\n  }\n  public set AABB(value: Box) {\n    this._AABB = value\n  }\n  // 额外的位置信息（受旋转影响），用于将来绑定编辑面板上元素位置信息，一定要区分它和 transform 的区别\n  // 注意旋转，位移，缩放后都要及时更新该信息\n  protected position: Vector2\n  protected _zIndex: number\n  public get zIndex(): number {\n    return this._zIndex\n  }\n  public set zIndex(value: number) {\n    this._zIndex = value\n  }\n\n  private _points: Vector2[]\n  public get points(): Vector2[] {\n    return this._points\n  }\n  public set points(value: Vector2[]) {\n    this._points = value\n  }\n\n  constructor(x: number, y: number, w: number, h: number) {\n    this.id = generateId()\n    this.transform = Transform.identity()\n    this.transform.a = w\n    this.transform.d = h\n    this.transform.translate2(x, y)\n    this.board = (window as any).board\n    this.AABB = new Box(x, y, w, h)\n    this.area = new Area(new Box(0, 0, 1, 1), this.transform)\n    // @todo: get the right index\n    this.zIndex = 0\n\n    this.board.eventEmitter.on(\"createSart\", this.onCreateStart.bind(this))\n    this.board.eventEmitter.on(\"creating\", this.onCreating.bind(this))\n    this.board.eventEmitter.on(\"createEnd\", this.onCreateEnd.bind(this))\n  }\n\n  public onCreateStart() {}\n  public onCreating() {\n    Log.blue(\"on creating in baseelement\")\n    if (this.board.selection[0] == this) {\n    }\n  }\n  public onCreateEnd() {}\n\n  // public setFrameWidth(w: number) {\n  //   this.frameWidth = w\n  // }\n  // public setFrameHeight(h: number) {\n  //   this.frameHeight = h\n  // }\n  protected abstract createDomInstance(): void\n  public abstract updateRendering(): void\n\n  // everytime element is transformed, this should be call\n  public updatePoints() {\n    let corners = this.area.box.toVector2()\n    this.points = corners.map((p) => p.applyTransform(this.transform))\n  }\n\n  protected updateAABB() {\n    let minX = Math.min(...this.points.map((p) => p.x))\n    let minY = Math.min(...this.points.map((p) => p.y))\n    let maxX = Math.max(...this.points.map((p) => p.x))\n    let maxY = Math.max(...this.points.map((p) => p.y))\n    // this.AABB.setSize(this.frameWidth, this.frameHeight)\n    this.AABB.set4(minX, minY, maxX - minX, maxY - minY)\n  }\n}\n","export const Default = {\n  fill: \"#d9d9d9\",\n};\n","import { BaseElement } from \"./BaseElement\"\nimport { Default } from \"./Constant\"\nimport { NS } from \"./namespaces\"\nimport { Transform } from \"./Transform\"\nimport { setAttr } from \"./utilities\"\n\ninterface EllipseAttr {\n  cx: number\n  cy: number\n  rx: number\n  ry: number\n}\n\nexport class ELLIPSE extends BaseElement {\n  private attr: EllipseAttr\n\n  constructor(x: number, y: number, width: number, height: number) {\n    super(x, y, width, height)\n\n    this.attr = {\n      cx: 0,\n      cy: 0,\n      rx: 1 / 2,\n      ry: 1 / 2,\n    }\n  }\n\n  protected createDomInstance() {\n    const element = document.createElementNS(\n      NS.SVG,\n      \"ellipse\"\n    ) as SVGEllipseElement\n    setAttr(element, this.attr)\n    setAttr(element, { fill: Default.fill })\n    this._domInstance = element\n  }\n\n  public updateAttr() {\n    this.attr = {\n      cx: 0,\n      cy: 0,\n      rx: 1 / 2,\n      ry: 1 / 2,\n    }\n  }\n\n  public updateRendering(): void {\n    this.updateAttr()\n    this.updatePoints()\n    this.updateAABB()\n    setAttr(this._domInstance, this.attr)\n    // svg 渲染椭圆在缩放时中心位置也会跟着缩放，cx, cy设置为 0 可避免该问题，但渲染位置就要做适当的偏移\n    let transform = new Transform(1, 0, 0, 1, 1 / 2, 1 / 2).rightMultiply(\n      this._transform\n    )\n    const { a, b, c, d, e, f } = transform\n    setAttr(this._domInstance, {\n      transform: `matrix(${a},${b},${c},${d},${e},${f})`,\n    })\n  }\n\n  public onCreateStart(): void {}\n  public onCreating(): void {}\n  public onCreateEnd(): void {}\n}\n","export class EventEmitter {\n  private callbacks: any\n\n  constructor() {\n    this.callbacks = {}\n  }\n\n  // @todo: define type of callbacks\n  public on(name: string, callback: (e: BoardEvent) => void) {\n    const that = this\n\n    if (typeof name === \"undefined\" || name === \"\") {\n      console.warn(\"wrong names\")\n      return false\n    }\n\n    if (typeof callback === \"undefined\") {\n      console.warn(\"wrong callback\")\n      return false\n    }\n\n    ;(that.callbacks[name] || (that.callbacks[name] = [])).push(callback)\n\n    return this\n  }\n\n  public off(name: string) {\n    if (typeof name === \"undefined\" || name === \"\") {\n      console.warn(\"wrong name\")\n      return false\n    }\n\n    if (this.callbacks[name] instanceof Array) {\n      delete this.callbacks[name]\n    }\n\n    return this\n  }\n\n  trigger(name: string, _args: any[]) {\n    if (typeof name === \"undefined\" || name === \"\") {\n      console.warn(\"wrong name\")\n      return false\n    }\n    const args = !(_args instanceof Array) ? [] : _args\n\n    if (!this.callbacks[name]) return\n    this.callbacks[name].forEach((callback) => {\n      callback.apply(this, args)\n    })\n  }\n}\n\nexport class BoardEvent {\n  private _name: string\n  public get name(): string {\n    return this._name\n  }\n  public set name(value: string) {\n    this._name = value\n  }\n  private _mouseEvent: MouseEvent\n  public get mouseEvent(): MouseEvent {\n    return this._mouseEvent\n  }\n  public set mouseEvent(value: MouseEvent) {\n    this._mouseEvent = value\n  }\n  private _customData: any\n  public get customData(): any {\n    return this._customData\n  }\n  public set customData(value: any) {\n    this._customData = value\n  }\n  constructor(name: string, mouseEvent: MouseEvent) {\n    this.name = name\n    this.mouseEvent = mouseEvent\n  }\n}\n","import { BaseElement } from \"./BaseElement\"\nimport { Default } from \"./Constant\"\nimport { NS } from \"./namespaces\"\nimport { setAttr } from \"./utilities\"\n\ninterface RectAttr {\n  x: number\n  y: number\n  width: number\n  height: number\n}\nexport class Rect extends BaseElement {\n  private attr: RectAttr\n\n  // public get domInstance(): SVGRectElement {\n  //   if (!this._domInstance) this._domInstance = this.createDomInstance();\n  //   return this._domInstance;\n  // }\n  // public set domInstance(value: SVGRectElement) {\n  //   this._domInstance = value;\n  // }\n\n  constructor(x: number, y: number, width: number, height: number) {\n    super(x, y, width, height)\n    this.attr = {\n      x: 0,\n      y: 0,\n      width: 1,\n      height: 1,\n    }\n  }\n\n  protected createDomInstance() {\n    const element = document.createElementNS(NS.SVG, \"rect\") as SVGRectElement\n    setAttr(element, this.attr)\n    setAttr(element, { fill: Default.fill })\n    this._domInstance = element\n  }\n\n  public updateAttr() {\n    this.attr.width = this.frameWidth\n    this.attr.height = this.frameHeight\n  }\n\n  public updateRendering(): void {\n    this.updatePoints()\n    this.updateAABB()\n    const { a, b, c, d, e, f } = this._transform\n    setAttr(this._domInstance, {\n      transform: `matrix(${a},${b},${c},${d},${e},${f})`,\n    })\n  }\n\n  // public onCreateStart(): void {}\n  public onCreating() {\n    this.updateAABB()\n  }\n  // public onCreateEnd(): void {}\n}\n","import { Board } from \"./Board\"\nimport { BoardEvent, EventEmitter } from \"./EventEmitter\"\n\ninterface IManager {}\n\nexport class Manager implements IManager {\n  board: Board\n  protected eventEmitter: EventEmitter\n\n  constructor(board: Board) {\n    this.board = board\n    this.eventEmitter = this.board.eventEmitter\n\n    this.board.eventEmitter.on(\"mouseDown\", this.onMouseDown.bind(this))\n    this.board.eventEmitter.on(\"mouseMove\", this.onMouseMove.bind(this))\n    this.board.eventEmitter.on(\"mouseUp\", this.onMouseUp.bind(this))\n  }\n\n  public onMouseDown(e: BoardEvent) {}\n  public onMouseMove(e: BoardEvent) {}\n  public onMouseUp(e: BoardEvent) {}\n}\n","import { Area } from \"./Area\"\nimport { Board } from \"./Board\"\nimport { Box } from \"./Box\"\nimport { BoardEvent } from \"./EventEmitter\"\nimport { Log } from \"./Log\"\nimport { Manager } from \"./Manager\"\nimport { NS } from \"./namespaces\"\nimport { Transform } from \"./Transform\"\nimport { setAttr } from \"./utilities\"\nimport { Vector2 } from \"./Vector\"\n\n// @todo: refractor as a plugin\nexport class Selector extends Manager {\n  private container: SVGElement\n  private selectorRoot: SVGGElement\n  private selectRect: SVGRectElement\n  private selectedRectMap: Map<string, SVGPathElement>\n  private selectedCorner: SVGGElement\n  private selectArea: Area\n  private lastSelectedNum: number\n\n  private selectorTransform: Transform\n  constructor(board: Board) {\n    super(board)\n    this.board = board\n    this.container = board.svgroot\n    this.selectorRoot = board.svgdoc.createElementNS(NS.SVG, \"g\") as SVGGElement\n    this.selectRect = board.svgdoc.createElementNS(\n      NS.SVG,\n      \"rect\"\n    ) as SVGRectElement\n    this.selectedRectMap = new Map()\n    this.lastSelectedNum = 0\n    this.selectArea = new Area(new Box(0, 0, 1, 1), Transform.identity())\n    // @todo: 一些初始设置blabla\n    setAttr(this.selectRect, {\n      fill: \"#f00\",\n      stroke: \"#66c\",\n      \"stroke-width\": \"0.5\",\n      \"fill-opacity\": \"0.15\",\n      display: \"none\",\n    })\n    this.selectorRoot.append(this.selectRect)\n    this.container.append(this.selectorRoot)\n\n    board.eventEmitter.on(\"selectStart\", this.onSelectStart.bind(this))\n    board.eventEmitter.on(\"selectMove\", this.onSelectMove.bind(this))\n    board.eventEmitter.on(\"selectEnd\", this.onSelectEnd.bind(this))\n    board.eventEmitter.on(\"elementSelected\", this.onElemetSelected.bind(this))\n    board.eventEmitter.on(\"nothingSelected\", this.onNothingSelected.bind(this))\n\n    board.eventEmitter.on(\"creating\", this.onCreating.bind(this))\n    board.eventEmitter.on(\"draging\", this.onDraging.bind(this))\n    board.eventEmitter.on(\"rotating\", this.onRotating.bind(this))\n    board.eventEmitter.on(\"scaling\", this.onScaling.bind(this))\n  }\n\n  private onSelectStart(e) {\n    setAttr(this.selectRect, { display: \"inline\" })\n  }\n\n  private onSelectMove(e) {\n    let x = Math.min(e.customData.startX, e.customData.endX)\n    let y = Math.min(e.customData.startY, e.customData.endY)\n    let width = Math.abs(e.customData.endX - e.customData.startX)\n    let height = Math.abs(e.customData.endY - e.customData.startY)\n\n    setAttr(this.selectRect, { x, y, width, height })\n    this.selectArea.box.x = x\n    this.selectArea.box.y = y\n    this.selectArea.box.w = width\n    this.selectArea.box.h = height\n    let selected = []\n    // @todo: 判断方式需要改一下，矩形相交\n    this.board.elements.forEach((e) => {\n      if (e.points.find((p) => this.selectArea.include(p))) {\n        selected.push(e)\n      }\n    })\n    if (this.lastSelectedNum != selected.length) {\n      this.board.setSelected(selected)\n      this.lastSelectedNum = selected.length\n    }\n  }\n  private onSelectEnd(e: BoardEvent) {\n    this.selectRect.setAttribute(\"display\", \"none\")\n    this.selectRect.setAttribute(\"width\", \"0\")\n    this.selectRect.setAttribute(\"height\", \"0\")\n  }\n\n  private onElemetSelected(e: BoardEvent) {\n    this.updateRender()\n  }\n\n  private onNothingSelected(e: BoardEvent) {\n    this.selectedRectMap.forEach((ele) => setAttr(ele, { display: \"none\" }))\n  }\n\n  private onDragStart(e: BoardEvent) {}\n\n  private onCreateStart(e: BoardEvent) {}\n\n  private onCreating(e: BoardEvent) {\n    this.onElemetSelected(e)\n  }\n\n  private onDraging(e: BoardEvent) {\n    this.onElemetSelected(e)\n  }\n\n  private onRotating(e: BoardEvent) {\n    this.updateRender()\n  }\n\n  private onScaling(e: BoardEvent) {\n    this.updateRender()\n  }\n\n  private onElementCreateing(e: BoardEvent) {\n    const elements = this.board.selection\n    // 获取最大宽高，若一个元素，则取该元素的 BBOX，多个元素则取 AABB 的并集\n    if (!elements) return\n    if (elements.length === 1) {\n      const { transform, frameWidth, frameHeight } = elements[0]\n      let rect = { x: 0, y: 0, width: frameWidth, height: frameHeight }\n      setAttr(this.selectedRectMap.get(elements[0].id), {\n        transform: transform.cssString(),\n        display: \"inline\",\n        ...rect,\n      })\n    }\n  }\n\n  private updateSelector() {}\n\n  private updateRender() {\n    this.clear()\n    const elements = this.board.selection\n    // 获取最大宽高，若一个元素，则取该元素的 BBOX，多个元素则取 AABB 的并集\n    if (!elements) return\n    if (elements.length == 2) debugger\n    for (let element of elements) {\n      const { transform } = element\n      if (!this.selectedRectMap.has(element.id)) {\n        let ele = this.board.svgdoc.createElementNS(\n          NS.SVG,\n          \"path\"\n        ) as SVGPathElement\n        this.selectedRectMap.set(element.id, ele)\n        this.selectorRoot.append(ele)\n        setAttr(ele, {\n          id: element.id,\n          fill: \"none\",\n          stroke: \"#009aff\",\n          \"stroke-width\": \"2.5\",\n          \"fill-opacity\": \"0.15\",\n          display: \"none\",\n        })\n      }\n      // 计算 path 各个点，并导出成字符串\n      let ps = [\n        Vector2.zeros(),\n        new Vector2(0, 1),\n        Vector2.ones(),\n        new Vector2(1, 0),\n      ]\n      ps.forEach((p) => p.applyTransform(transform))\n      let pathStr = \"M\" + ps.map((p) => p.x + \",\" + p.y).join(\"L\") + \"Z\"\n      setAttr(this.selectedRectMap.get(element.id), {\n        display: \"inline\",\n        d: pathStr,\n      })\n    }\n  }\n\n  private clear() {\n    this.selectedRectMap.forEach((e) => setAttr(e, { display: \"none\" }))\n  }\n}\n","import { Board, DIRECTION, MouseStatus } from \"./Board\"\nimport { BoardEvent } from \"./EventEmitter\"\nimport { Log } from \"./Log\"\nimport { Manager } from \"./Manager\"\nimport { Vector2 } from \"./Vector\"\n\nexport class MouseStatusManager extends Manager {\n  private _mouseStatus: MouseStatus\n  private _cachedEvent: BoardEvent\n\n  private _cornerType: DIRECTION\n  public get cornerType(): DIRECTION {\n    return this._cornerType\n  }\n  public set cornerType(value: DIRECTION) {\n    this._cornerType = value\n  }\n\n  public get mouseStatus(): MouseStatus {\n    return this._mouseStatus\n  }\n  public set mouseStatus(value: MouseStatus) {\n    if (this._mouseStatus === value) return\n    // console.log(this._mouseStatus)\n    this._mouseStatus = value\n    this._cachedEvent.customData.mouseStatus = value\n    this.eventEmitter.trigger(\"mouseStatusChange\", [this._cachedEvent])\n  }\n\n  constructor(board: Board) {\n    super(board)\n\n    this._cachedEvent = new BoardEvent(\"mouseStatusChange\", null)\n    this._cachedEvent.customData = {}\n\n    this.eventEmitter.on(\n      \"mouseStatusChange\",\n      this.onMouseStatusChange.bind(this)\n    )\n  }\n\n  public override onMouseDown(e: BoardEvent): void {\n    Log.blue(\"mouse down in MouseStatusManager...\")\n  }\n  public override onMouseMove(e: BoardEvent): void {\n    this.updateMouseStatus(e)\n  }\n  public override onMouseUp(e: BoardEvent): void {}\n\n  private onMouseStatusChange(e: BoardEvent) {\n    const { customData } = e\n    switch (customData.mouseStatus) {\n      default:\n      case MouseStatus.DRAG:\n        this.board.container.className = \"\"\n        break\n      case MouseStatus.ROTATE:\n        this.board.container.className = \"cursor-move\"\n        break\n      case MouseStatus.SCALE:\n        this.board.container.className = \"cursor-resize\"\n        break\n    }\n  }\n\n  private updateMouseStatus(e: BoardEvent) {\n    if (!this.board.selection || this.board.selection.length < 1) return false\n    let { x, y } = e.customData\n    let distances = this.board.selectionArea.nearestCornerDistance(\n      new Vector2(x, y)\n    )\n    let dis = Infinity,\n      index = -1\n    distances.forEach((d, i) => {\n      if (d < dis) {\n        dis = d\n        index = i\n      }\n    })\n    switch (index) {\n      case 0:\n        this.cornerType = DIRECTION.LT\n        break\n      case 1:\n        this.cornerType = DIRECTION.LB\n        break\n      case 2:\n        this.cornerType = DIRECTION.RB\n        break\n      case 3:\n        this.cornerType = DIRECTION.RT\n        break\n    }\n\n    if (dis < 5) {\n      this.mouseStatus = MouseStatus.SCALE\n    } else if (dis < 10) {\n      this.mouseStatus = MouseStatus.ROTATE\n      // @todo: finish this\n    } else if (false) {\n      this.mouseStatus = MouseStatus.DRAG\n    } else {\n      this.mouseStatus = MouseStatus.SELECT\n    }\n  }\n}\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { Board } from \"./svgBoard\";\nimport \"./index.css\";\nconsole.log(\"entry index.ts\");\n\nlet board = new Board(document.body);\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","nc","EditorMode","CreateMode","ResizeMode","MouseStatus","DIRECTION","x","y","_x","_y","value","Math","sqrt","ones","Vector2","zeros","add","v","subtract","dotMultiply","crossMultiply","angle","acos","min","mod","distance","pow","rotateAtOrigin","theta","cos","sin","applyTransform","transform","b","c","f","opposite","clone","w","h","_w","_h","set","box","set4","setSize","merge","mergeAll","boxes","minx","maxx","max","miny","Box","center","toVector2","y2","x2","message","console","error","blue","info","red","identity","Transform","from","setFromArray","arr","copy","t","reset","translate","translate2","radius","sina","cosa","rightMultiply","rotate","p","scale","scaleAtOrigin","flipY","x1","tm","leftMultiply","inverse","detA","cssString","tranform","_box","_transform","include","pp","nearestCornerDistance","NS","generateSvgElement","docuemnt","ele","createElementNS","keys","forEach","setAttr","attr","board","AABB","area","Area","zIndex","eventEmitter","on","onCreateStart","bind","onCreating","onCreateEnd","_id","_area","_domInstance","createDomInstance","_AABB","_zIndex","_points","Log","selection","updatePoints","corners","points","updateAABB","minX","minY","maxX","maxY","Default","width","height","cx","cy","rx","ry","fill","updateAttr","updateRendering","BaseElement","callbacks","name","callback","warn","off","Array","trigger","_args","args","mouseEvent","_name","_mouseEvent","_customData","frameWidth","frameHeight","onMouseDown","onMouseMove","onMouseUp","container","svgroot","selectorRoot","svgdoc","selectRect","selectedRectMap","Map","lastSelectedNum","selectArea","stroke","display","append","onSelectStart","onSelectMove","onSelectEnd","onElemetSelected","onNothingSelected","onDraging","onRotating","onScaling","customData","startX","endX","startY","endY","abs","selected","elements","find","setSelected","updateRender","onDragStart","onElementCreateing","rect","updateSelector","clear","has","ps","pathStr","Manager","_cachedEvent","BoardEvent","onMouseStatusChange","_cornerType","_mouseStatus","mouseStatus","updateMouseStatus","DRAG","className","ROTATE","SCALE","distances","selectionArea","dis","Infinity","cornerType","LT","LB","RB","RT","SELECT","boardX","boardY","MouseDown","mouseStartX","mouseStartY","lastZIndex","saveOptions","plugins","currentMode","currentResizeMode","CASUAL","rubberBox","curBBoxes","curConfig","dimensions","selectionTransforms","_eventEmitter","EventEmitter","mouseStatusManager","MouseStatusManager","updateBoardPosition","svgAttributs","xmlns","xlinks","overflow","bgAttributes","canvasBg","_svgdoc","rectAttributes","svgcontent","initSelector","initEventHandler","initCustomEventHandler","_selection","_selectionArea","_container","_elements","_svgroot","selector","Selector","addEventListener","handleMouseDown","handleMouseUp","handleClick","handleDBClick","handleMouseMove","handleKeyDown","onCreateElement","onCreateMove","onChangeMode","onDragEnd","onRotateStart","onRotateEnd","onScaleStart","onScaleEnd","bbox","getBoundingClientRect","exportSvg","log","eventType","updateSelectionArea","setMode","mode","clientX","clientY","CREATE","currentCreateMode","RECT","ELLIPSE","LINE","type","clickOnSelectedArea","clickOnElement","Rect","domInstance","ellipse","flag","PI","lastFrameWidth","lastFrameHeight","fx","fy","start","end","absx","absy","transforms","pos","sort","idPrefix","Board","body"],"sourceRoot":""}