{"version":3,"file":"index.js","mappings":"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","sources":["webpack://svg-editor/./src/index.css","webpack://svg-editor/./node_modules/css-loader/dist/runtime/api.js","webpack://svg-editor/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://svg-editor/webpack/bootstrap","webpack://svg-editor/webpack/runtime/compat get default export","webpack://svg-editor/webpack/runtime/define property getters","webpack://svg-editor/webpack/runtime/hasOwnProperty shorthand","webpack://svg-editor/webpack/runtime/nonce","webpack://svg-editor/./src/svgBoard/Vector.ts","webpack://svg-editor/./src/svgBoard/Board.ts","webpack://svg-editor/./src/svgBoard/Box.ts","webpack://svg-editor/./src/svgBoard/Log.ts","webpack://svg-editor/./src/svgBoard/Transform.ts","webpack://svg-editor/./src/svgBoard/Area.ts","webpack://svg-editor/./src/svgBoard/BaseElement.ts","webpack://svg-editor/./src/svgBoard/Constant.ts","webpack://svg-editor/./src/svgBoard/namespaces.ts","webpack://svg-editor/./src/svgBoard/utilities.ts","webpack://svg-editor/./src/svgBoard/Ellipse.ts","webpack://svg-editor/./src/svgBoard/EventEmitter.ts","webpack://svg-editor/./src/svgBoard/Rect.ts","webpack://svg-editor/./src/svgBoard/Selector.ts","webpack://svg-editor/./src/index.css?cfe4","webpack://svg-editor/./src/index.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"html,\\nbody {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.cursor-crosshair {\\n  cursor: crosshair;\\n}\\n.cursor-pointer {\\n  cursor: pointer;\\n}\\n.cursor-default {\\n  cursor: default;\\n}\\n.cursor-grab {\\n  cursor: grab;\\n}\\n.cursor-resize {\\n  cursor: nwse-resize;\\n}\\n.cursor-move {\\n  cursor: move;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/index.css\"],\"names\":[],\"mappings\":\"AAAA;;EAEE,SAAS;EACT,UAAU;AACZ;;AAEA;EACE,iBAAiB;AACnB;AACA;EACE,eAAe;AACjB;AACA;EACE,eAAe;AACjB;AACA;EACE,YAAY;AACd;AACA;EACE,mBAAmB;AACrB;AACA;EACE,YAAY;AACd\",\"sourcesContent\":[\"html,\\nbody {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.cursor-crosshair {\\n  cursor: crosshair;\\n}\\n.cursor-pointer {\\n  cursor: pointer;\\n}\\n.cursor-default {\\n  cursor: default;\\n}\\n.cursor-grab {\\n  cursor: grab;\\n}\\n.cursor-resize {\\n  cursor: nwse-resize;\\n}\\n.cursor-move {\\n  cursor: move;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nc = undefined;","import { Transform } from \"./Transform\"\n\nexport class Vector2 {\n  private _x: number\n  public get x(): number {\n    return this._x\n  }\n  public set x(value: number) {\n    this._x = value\n  }\n  private _y: number\n  public get y(): number {\n    return this._y\n  }\n  public set y(value: number) {\n    this._y = value\n  }\n  public get mod() {\n    return Math.sqrt(this.x * this.x + this.y * this.y)\n  }\n\n  constructor(x: number, y: number) {\n    this._x = x\n    this._y = y\n  }\n\n  public static ones() {\n    return new Vector2(1, 1)\n  }\n  public static zeros() {\n    return new Vector2(0, 0)\n  }\n  public add(v: Vector2) {\n    this._x += v.x\n    this._y += v.y\n    return this\n  }\n  public subtract(v: Vector2) {\n    this._x -= v.x\n    this._y -= v.y\n    return this\n  }\n  public dotMultiply(v: Vector2) {\n    this._x *= v.x\n    this._y *= v.y\n    return this\n  }\n\n  public crossMultiply(v: Vector2) {\n    return this._x * v.y - this._y * v.x\n  }\n\n  public angle(v: Vector2) {\n    return Math.acos(\n      Math.min((this._x * v.x + this._y * v.y) / this.mod / v.mod, 1)\n    )\n  }\n\n  public distance(v: Vector2) {\n    return Math.sqrt(Math.pow(this.x - v.x, 2) + Math.pow(this.y - v.y, 2))\n  }\n\n  public rotateAtOrigin(theta: number) {\n    let [x, y] = [\n      this.x * Math.cos(theta) - this.y * Math.sin(theta),\n      this.x * Math.sin(theta) + this.y * Math.cos(theta),\n    ]\n    this.x = x\n    this.y = y\n    return this\n  }\n\n  public applyTransform(transform: Transform) {\n    const { a, b, c, d, e, f } = transform\n    let [x, y] = [a * this.x + c * this.y + e, b * this.x + d * this.y + f]\n    this.x = x\n    this.y = y\n    return this\n  }\n\n  public opposite() {\n    return new Vector2(-this._x, -this._y)\n  }\n\n  public clone() {\n    return new Vector2(this.x, this.y)\n  }\n}\n","import { BaseElement } from \"./BaseElement\"\nimport { ELLIPSE } from \"./Ellipse\"\nimport { BoardEvent, EventEmitter } from \"./EventEmitter\"\nimport { NS } from \"./namespaces\"\nimport { Rect } from \"./Rect\"\nimport { generateSvgElement, setAttr } from \"./utilities\"\nimport { Selector } from \"./Selector\"\nimport { Log } from \"./Log\"\nimport { Area } from \"./Area\"\nimport { Box } from \"./Box\"\nimport { Transform } from \"./Transform\"\nimport { Vector2 } from \"./Vector\"\n\nexport class Board {\n  private saveOptions: any\n  private _selection: BaseElement[]\n  fx: number\n  fy: number\n  public get selection(): BaseElement[] {\n    return this._selection\n  }\n  public set selection(value: BaseElement[]) {\n    this._selection = value\n  }\n  private selectionArea: Area\n  private plugins: any[]\n  private currentMode: EditorMode\n  private currentResizeMode: ResizeMode\n  private rubberBox: HTMLElement\n  private curBBoxes: any[]\n  private selector: Selector\n  private container: HTMLElement\n  private elements: BaseElement[]\n  private _svgdoc: Document\n  private _eventEmitter: EventEmitter\n  private _cachedEvent: BoardEvent\n\n  private boardX = 0\n  private boardY = 0\n\n  // mouse relative\n  // @todo: maybe not need this\n  private MouseDown = false\n  private mouseStartX = 0\n  private mouseStartY = 0\n  private lastZIndex = 0\n  private currentCreateMode: CreateMode\n\n  private _mouseStatus = MouseStatus.DRAG\n  public get mouseStatus() {\n    return this._mouseStatus\n  }\n  public set mouseStatus(value) {\n    if (this.mouseStatus == value) return\n    this._mouseStatus = value\n    this._cachedEvent.customData = {\n      mouseStatus: value,\n    }\n    this._eventEmitter.trigger(\"mouseStatusChange\", [this._cachedEvent])\n  }\n\n  public get eventEmitter(): EventEmitter {\n    return this._eventEmitter\n  }\n  public set eventEmitter(value: EventEmitter) {\n    this._eventEmitter = value\n  }\n  public get svgdoc(): Document {\n    return this._svgdoc\n  }\n  public set svgdoc(value: Document) {\n    this._svgdoc = value\n  }\n  private _svgroot: SVGElement\n  public get svgroot(): SVGElement {\n    return this._svgroot\n  }\n  public set svgroot(value: SVGElement) {\n    this._svgroot = value\n  }\n  private svgcontent: SVGElement\n  public static idPrefix = \"svg\"\n  private curConfig: any\n  private canvasBg: SVGElement\n\n  // @todo: 此处存放一些交互时需要暂存的信息，后续看下怎么优化\n  private selectionTransforms: Transform[]\n  private lastFrameWidth: number\n  private lastFrameHeight: number\n  private cornerType: DIRECTION\n\n  constructor(container: HTMLElement) {\n    this.saveOptions = {}\n    this.selection = []\n    this.selectionArea = new Area(new Box(0, 0, 0, 0), Transform.identity())\n    this.plugins = []\n    this.currentMode = EditorMode.SELECT\n    this.currentResizeMode = ResizeMode.CASUAL\n    this.rubberBox = null\n    this.curBBoxes = []\n    this.curConfig = {\n      dimensions: [800, 600],\n    }\n    this.elements = []\n    this.selectionTransforms = []\n\n    this._eventEmitter = new EventEmitter()\n    this._cachedEvent = new BoardEvent(\"\", null)\n\n    this.container = container\n    this.svgdoc = document\n\n    this.updateBoardPosition()\n\n    this.svgroot = this.svgdoc.createElementNS(NS.SVG, \"svg\") as SVGElement\n\n    const svgAttributs = {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      id: \"svgroot\",\n      xlinks: \"http://www.w3.org/1999/xlink\",\n      width: this.curConfig.dimensions[0],\n      height: this.curConfig.dimensions[1],\n      overflow: \"visible\",\n    }\n    Object.keys(svgAttributs).forEach((key) => {\n      this.svgroot.setAttribute(key, svgAttributs[key])\n    })\n\n    const bgAttributes = {\n      id: \"svgBg\",\n      width: this.curConfig.dimensions[0],\n      height: this.curConfig.dimensions[1],\n      stroke: \"#000\",\n      fill: \"#fbfbfb\",\n      style: \"pointer-events: none\",\n    }\n    this.canvasBg = generateSvgElement(this._svgdoc, bgAttributes)\n\n    const rect = this.svgdoc.createElementNS(NS.SVG, \"rect\") as SVGRectElement\n    const rectAttributes = {\n      id: \"blabla\",\n      width: \"100%\",\n      height: \"100%\",\n      stroke: \"#000\",\n      fill: \"#f8f8f8\",\n      style: \"pointer-events: none\",\n      x: 0,\n      y: 0,\n    }\n    Object.keys(rectAttributes).forEach((key) => {\n      rect.setAttribute(key, rectAttributes[key])\n    })\n    this.canvasBg.append(rect)\n\n    this.svgcontent = generateSvgElement(this.svgdoc, {\n      ...svgAttributs,\n      id: \"svgcontent\",\n    })\n\n    this.svgroot.append(this.canvasBg)\n    this.svgroot.append(this.svgcontent)\n    this.container.append(this.svgroot)\n\n    this.initSelector()\n\n    this.initEventHandler()\n    this.initCustomEventHandler()\n\n    // @todo: 传递画板的引用给元素，有没有更好的办法？？\n    ;(window as any).board = this\n  }\n\n  private initSelector() {\n    this.selector = new Selector(this)\n  }\n\n  private initEventHandler() {\n    // @todo: maybe 需要监听画板是否加载完成，后续优化\n    this.container.addEventListener(\n      \"mousedown\",\n      this.handleMouseDown.bind(this)\n    )\n    this.container.addEventListener(\"mouseup\", this.handleMouseUp.bind(this))\n    this.container.addEventListener(\"click\", this.handleClick.bind(this))\n    this.container.addEventListener(\"dblclick\", this.handleDBClick.bind(this))\n    this.container.addEventListener(\n      \"mousemove\",\n      this.handleMouseMove.bind(this)\n    )\n    document.addEventListener(\"resize\", () => {\n      this.updateBoardPosition()\n    })\n    this.container.addEventListener(\"keydown\", this.handleKeyDown.bind(this))\n  }\n\n  private initCustomEventHandler() {\n    this._eventEmitter.on(\"selectStart\", this.onSelectStart.bind(this))\n    this._eventEmitter.on(\"createElement\", this.onCreateElement.bind(this))\n    this._eventEmitter.on(\"creating\", this.onCreateMove.bind(this))\n    this._eventEmitter.on(\"createEnd\", this.onCreateEnd.bind(this))\n    this._eventEmitter.on(\"changeMode\", this.onChangeMode.bind(this))\n    this._eventEmitter.on(\"dragStart\", this.onDragStart.bind(this))\n    this._eventEmitter.on(\"draging\", this.onDraging.bind(this))\n    this._eventEmitter.on(\"dragEnd\", this.onDragEnd.bind(this))\n    this._eventEmitter.on(\"rotating\", this.onRotating.bind(this))\n    this._eventEmitter.on(\"scaleStart\", this.onScaleStart.bind(this))\n    this._eventEmitter.on(\"scaling\", this.onScaling.bind(this))\n    this._eventEmitter.on(\n      \"mouseStatusChange\",\n      this.onMouseStatusChange.bind(this)\n    )\n  }\n\n  private updateBoardPosition() {\n    let bbox = this.container.getBoundingClientRect()\n    this.boardX = bbox.x\n    this.boardY = bbox.y\n  }\n\n  private updateMouseStatus(e: MouseEvent) {\n    if (!this.selection || this.selection.length < 1) return false\n    let [x, y] = [e.clientX - this.boardX, e.clientY - this.boardY]\n    let distances = this.selectionArea.nearestCornerDistance(new Vector2(x, y))\n    let dis = 10000000,\n      index = -1\n    distances.forEach((d, i) => {\n      if (d < dis) {\n        dis = d\n        index = i\n      }\n    })\n    switch (index) {\n      case 0:\n        this.cornerType = DIRECTION.LT\n        break\n      case 1:\n        this.cornerType = DIRECTION.LB\n        break\n      case 2:\n        this.cornerType = DIRECTION.RB\n        break\n      case 3:\n        this.cornerType = DIRECTION.RT\n        break\n    }\n\n    // this.MouseAtCorner = this.hoverAtSelectionCorner(new Vector2(x, y))\n    if (dis < 5) {\n      this.mouseStatus = MouseStatus.SCALE\n    } else if (dis < 10) {\n      this.mouseStatus = MouseStatus.ROTATE\n    } else {\n      this.mouseStatus = MouseStatus.DRAG\n    }\n  }\n\n  public exportSvg(): string {\n    return \"\"\n  }\n\n  // @todo: 这个方法修饰符应该设置成 private or protected\n  public setSelected(elements: BaseElement[]) {\n    console.log(elements)\n    this.selection = elements\n    let eventType = \"elementSelected\"\n    if (!elements || elements.length == 0) {\n      eventType = \"nothingSelected\"\n    } else {\n      this.updateSelectionArea()\n      this._cachedEvent.customData = {\n        elements,\n        area: this.selectionArea,\n      }\n    }\n    // @todo: create new events derived from BoardEvent\n    this._eventEmitter.trigger(eventType, [this._cachedEvent])\n  }\n\n  private setMode(mode: EditorMode) {\n    this.currentMode = mode\n    this._cachedEvent.customData = {\n      mode,\n    }\n    this._eventEmitter.trigger(\"changeMode\", [this._cachedEvent])\n  }\n\n  private updateSelectionArea() {\n    let elements = this.selection\n    // calculate area\n    if (elements.length == 1) {\n      this.selectionArea.transform = elements[0].transform\n      this.selectionArea.box.set4(\n        0,\n        0,\n        elements[0].frameWidth,\n        elements[0].frameHeight\n      )\n    } else {\n      this.selectionArea.transform.reset()\n      this.selectionArea.box = Box.mergeAll(elements.map((e) => e.AABB))\n    }\n  }\n\n  // original events\n  protected handleMouseDown(e: MouseEvent) {\n    console.log(\"currentMode: \", this.currentMode)\n    console.log(\"currentInsertMode: \", this.currentCreateMode)\n    this.MouseDown = true\n    this.mouseStartX = e.clientX - this.boardX\n    this.mouseStartY = e.clientY - this.boardY\n    // @todo: 元素被点击时，更新 this.selected\n    if (this.currentMode === EditorMode.CREATE) {\n      this._cachedEvent.mouseEvent = e\n      this._cachedEvent.name = \"createElement\"\n      this._cachedEvent.customData = {\n        type: this.currentCreateMode,\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n      }\n      this._eventEmitter.trigger(\"createElement\", [this._cachedEvent])\n      return\n    }\n    if (this._mouseStatus == MouseStatus.ROTATE) {\n      this.setMode(EditorMode.ROTATE)\n      return\n    }\n    if (this._mouseStatus == MouseStatus.SCALE) {\n      this.setMode(EditorMode.SCALE)\n      return\n    }\n\n    // 若点击在选中物体范围内则进入拖拽模式(enter drag mode if mouse down on the selected area)\n    if (\n      this.selection &&\n      this.selection.length >= 1 &&\n      this.clickOnSelectedArea(e)\n    ) {\n      this.setMode(EditorMode.DRAG)\n    } else {\n      if (\n        this.clickOnElement(new Vector2(this.mouseStartX, this.mouseStartY))\n      ) {\n        this.setMode(EditorMode.DRAG)\n      } else {\n        this.setMode(EditorMode.SELECT)\n        this._cachedEvent.mouseEvent = e\n        this._cachedEvent.name = \"selectStart\"\n        this._eventEmitter.trigger(\"selectStart\", [this._cachedEvent])\n      }\n    }\n  }\n  protected handleMouseUp(e: MouseEvent) {\n    console.log(\"mouse up...\")\n    this.MouseDown = false\n    if (this.currentMode === EditorMode.CREATE) {\n      this._cachedEvent.name = \"createEnd\"\n      this._cachedEvent.mouseEvent = e\n      this._eventEmitter.trigger(\"createEnd\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.SELECT) {\n      this._cachedEvent.name = \"selectEnd\"\n      this._cachedEvent.mouseEvent = e\n      this._eventEmitter.trigger(\"selectEnd\", [this._cachedEvent])\n    }\n    this.currentMode = EditorMode.SELECT\n  }\n  protected handleMouseMove(e: MouseEvent) {\n    this.updateMouseStatus(e)\n    if (this.currentMode === EditorMode.CREATE && this.MouseDown) {\n      this._cachedEvent.mouseEvent = e\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.clientX - this.boardX,\n        endY: e.clientY - this.boardY,\n      }\n      this._eventEmitter.trigger(\"creating\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.DRAG) {\n      this._cachedEvent.mouseEvent = e\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.clientX - this.boardX,\n        endY: e.clientY - this.boardY,\n      }\n      this._eventEmitter.trigger(\"draging\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.ROTATE) {\n      this._cachedEvent.mouseEvent = e\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.clientX - this.boardX,\n        endY: e.clientY - this.boardY,\n      }\n      this._eventEmitter.trigger(\"rotating\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.SCALE) {\n      this._cachedEvent.mouseEvent = e\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.clientX - this.boardX,\n        endY: e.clientY - this.boardY,\n      }\n      this._eventEmitter.trigger(\"scaling\", [this._cachedEvent])\n    } else if (this.MouseDown) {\n      this._cachedEvent.mouseEvent = e\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.clientX - this.boardX,\n        endY: e.clientY - this.boardY,\n      }\n      this._eventEmitter.trigger(\"selectMove\", [this._cachedEvent])\n    }\n  }\n  protected handleClick(e: MouseEvent) {}\n  protected handleDBClick(e: MouseEvent) {}\n  protected handleKeyDown(e: KeyboardEvent) {\n    switch (e.key) {\n      case \"r\":\n        this.setMode(EditorMode.CREATE)\n        this.currentCreateMode = CreateMode.RECT\n        break\n      case \"o\":\n        this.setMode(EditorMode.CREATE)\n        this.currentCreateMode = CreateMode.ELLIPSE\n        break\n      case \"l\":\n        this.setMode(EditorMode.CREATE)\n        this.currentCreateMode = CreateMode.LINE\n        break\n      case \"v\":\n        this.setMode(EditorMode.SELECT)\n        this.currentCreateMode = CreateMode.LINE\n        break\n    }\n  }\n\n  // custom events\n  private onSelectStart(e: BoardEvent) {}\n  private onSelectMove(e: BoardEvent) {}\n  private onSelectEnd(e: BoardEvent) {}\n\n  private onCreateElement(e: BoardEvent) {\n    const { mouseEvent, customData } = e\n    switch (customData.type) {\n      case CreateMode.RECT:\n        let rect = new Rect(customData.startX, customData.startY, 0, 0)\n        this.svgcontent.append(rect.domInstance)\n        this.elements.push(rect)\n        this.setSelected([rect])\n        break\n      case CreateMode.ELLIPSE:\n        let ellipse = new ELLIPSE(customData.startX, customData.startY, 0, 0)\n        this.svgcontent.append(ellipse.domInstance)\n        this.elements.push(ellipse)\n        this.setSelected([ellipse])\n        break\n      default:\n        Log.Error(\"error insert mode\")\n    }\n  }\n  private onCreateMove(e: BoardEvent) {\n    this.updateSelectionArea()\n    if (this.container.className) this.container.className = \"\"\n    console.log(\"handle create move...\")\n    const { mouseEvent, customData } = e\n    let [width, height] = [\n      Math.abs(customData.endX - customData.startX),\n      Math.abs(customData.endY - customData.startY),\n    ]\n    this.selection[0].setFrameWidth(width)\n    this.selection[0].setFrameHeight(height)\n    this.selection[0].transform.e = Math.min(customData.endX, customData.startX)\n    this.selection[0].transform.f = Math.min(customData.endY, customData.startY)\n    this.selection[0].updateRendering()\n\n    // @check: 在创建与变换元素时候需要时刻更新选择器，抛出这个事件是否合理？\n    this._eventEmitter.trigger(\"elementSelected\", [this._cachedEvent])\n  }\n  private onCreateEnd(e: BoardEvent) {\n    console.log(\"create element end...\")\n  }\n  private onDragStart(e: BoardEvent) {}\n  private onDraging(e: BoardEvent) {\n    const { mouseEvent, customData } = e\n    const { startX, startY, endX, endY } = customData\n    // @todo: 需要记录 drag 之前的 transform 信息\n    this.selection.forEach((n, index) => {\n      n.transform.e = this.selectionTransforms[index].e + endX - startX\n      n.transform.f = this.selectionTransforms[index].f + endY - startY\n      n.updateRendering()\n    })\n  }\n  private onDragEnd(e: BoardEvent) {}\n\n  private onRotateStart(e: BoardEvent) {}\n  private onRotating(e: BoardEvent) {\n    const { mouseEvent, customData } = e\n    const { startX, startY, endX, endY } = customData\n    let center = this.selectionArea.center()\n    let a = new Vector2(startX - center.x, startY - center.y)\n    let b = new Vector2(endX - center.x, endY - center.y)\n    let theta = a.angle(b)\n    let flag = a.crossMultiply(b)\n\n    theta = flag > 0 ? theta : Math.PI * 2 - theta\n    this.selection.forEach((n, index) => {\n      n.transform.copy(\n        this.selectionTransforms[index].clone().rotate(theta, center)\n      )\n      n.updateRendering()\n    })\n\n    this.updateSelectionArea()\n  }\n  private onRotateEnd(e: BoardEvent) {}\n\n  private onScaleStart(e: BoardEvent) {\n    // @todo: 还没考虑多选情况\n    this.lastFrameWidth = this.selection[0].frameWidth\n    this.lastFrameHeight = this.selection[0].frameHeight\n    let fx = 1\n    let fy = 1\n    switch (this.cornerType) {\n      default:\n      case DIRECTION.RB:\n        break\n      case DIRECTION.RT:\n        fy = -1\n        break\n      case DIRECTION.LB:\n        fx = -1\n        break\n      case DIRECTION.LT:\n        fx = fy = -1\n        break\n    }\n    this.fx = fx\n    this.fy = fy\n  }\n  private onScaling(e: BoardEvent) {\n    const { mouseEvent, customData } = e\n    const { startX, startY, endX, endY } = customData\n    let a = new Vector2(startX, startY)\n    let b = new Vector2(endX, endY)\n\n    let fx = this.fx\n    let fy = this.fy\n\n    this.selection.forEach((n, index) => {\n      a.applyTransform(this.selectionTransforms[index].inverse())\n      b.applyTransform(this.selectionTransforms[index].inverse())\n      b.subtract(a)\n\n      // !!! @todo: avoid the value become 0\n      let [x, y] = [\n        (fx * b.x) / this.lastFrameWidth + 1,\n        (fy * b.y) / this.lastFrameHeight + 1,\n      ]\n      let [absx, absy] = [\n        Math.max(Math.abs(x), 0.001),\n        Math.max(Math.abs(y), 0.001),\n      ]\n      x = x < 0 ? -absx : absx\n      y = y < 0 ? -absy : absy\n      // @todo: 计算各种情况，此处仅仅计算了左上角\n      n.transform.copy(\n        this.selectionTransforms[index]\n          .clone()\n          .scale(\n            x,\n            y,\n            new Vector2(\n              fx == -1 ? this.lastFrameWidth : 0,\n              fy == -1 ? this.lastFrameHeight : 0\n            )\n          )\n      )\n      n.updateRendering()\n    })\n\n    this.updateSelectionArea()\n  }\n  private onScaleEnd(e: BoardEvent) {}\n\n  private onChangeMode(e: BoardEvent) {\n    const { customData } = e\n    console.log(\"change mode:\", customData.mode)\n    if (customData.mode === EditorMode.SELECT) {\n      this.setSelected([])\n    } else if (this.currentMode === EditorMode.CREATE) {\n      this.container.className = \"cursor-crosshair\"\n    } else if (this.currentMode == EditorMode.DRAG) {\n      this.selectionTransforms = this.selection.map((n) => n.transform.clone())\n      this._cachedEvent.customData = {\n        transforms: this.selectionTransforms,\n      }\n      this._eventEmitter.trigger(\"dragStart\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.ROTATE) {\n      this.selectionTransforms = this.selection.map((n) => n.transform.clone())\n      this._cachedEvent.customData = {\n        transforms: this.selectionTransforms,\n      }\n      this._eventEmitter.trigger(\"rotateStart\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.SCALE) {\n      this.selectionTransforms = this.selection.map((n) => n.transform.clone())\n      this._cachedEvent.customData = {\n        transforms: this.selectionTransforms,\n      }\n      this._eventEmitter.trigger(\"scaleStart\", [this._cachedEvent])\n    }\n  }\n\n  private onMouseStatusChange(e: BoardEvent) {\n    const { customData } = e\n    switch (customData.mouseStatus) {\n      default:\n      case MouseStatus.DRAG:\n        this.container.className = \"\"\n        break\n      case MouseStatus.ROTATE:\n        this.container.className = \"cursor-move\"\n        break\n      case MouseStatus.SCALE:\n        this.container.className = \"cursor-resize\"\n        break\n    }\n  }\n\n  private clickOnSelectedArea(e: MouseEvent) {\n    return this.selectionArea.include(\n      new Vector2(e.clientX - this.boardX, e.clientY - this.boardY)\n    )\n  }\n\n  private clickOnElement(pos) {\n    // @todo: 给每个元素设置一个 Area 属性\n    let element = this.elements\n      .sort((a, b) => (a.zIndex > b.zIndex ? 1 : -1))\n      .find((e) => {\n        return new Area(\n          new Box(0, 0, e.frameWidth, e.frameHeight),\n          e.transform\n        ).include(pos)\n      })\n    this.setSelected(element ? [element] : [])\n    return !!element\n  }\n}\n\nexport enum EditorMode {\n  SELECT = \"SELECT\",\n  DRAG = \"DRAG\",\n  ROTATE = \"ROTATE\",\n  SCALE = \"SCALE\",\n  CREATE = \"CREATE\",\n  DRAW = \"DRAW\",\n}\n\nexport enum CreateMode {\n  RECT = \"RECT\",\n  ELLIPSE = \"ELLIPsE\",\n  LINE = \"LINE\",\n}\n\nexport enum ResizeMode {\n  CASUAL,\n  SCALE,\n}\n\nexport enum MouseStatus {\n  DRAG,\n  SCALE,\n  ROTATE,\n}\n\nexport enum DIRECTION {\n  LT,\n  LM,\n  LB,\n  CT,\n  CM,\n  CB,\n  RT,\n  RM,\n  RB,\n}\n\nexport class EventHandler {\n  private static instance: EventHandler = null\n  private constructor() {}\n  static getInstance() {\n    if (!EventHandler.instance) {\n      EventHandler.instance = new EventHandler()\n    }\n    return EventHandler.instance\n  }\n}\n","import { Vector2 } from \"./Vector\"\n\nexport class Box {\n  private _x: number\n  public get x(): number {\n    return this._x\n  }\n  public set x(value: number) {\n    this._x = value\n  }\n  private _y: number\n  public get y(): number {\n    return this._y\n  }\n  public set y(value: number) {\n    this._y = value\n  }\n  private _w: number\n  public get w(): number {\n    return this._w\n  }\n  public set w(value: number) {\n    this._w = value\n  }\n  private _h: number\n  public get h(): number {\n    return this._h\n  }\n  public set h(value: number) {\n    this._h = value\n  }\n  public get x2(): number {\n    return this._x + this._w\n  }\n  public get y2(): number {\n    return this._y + this._h\n  }\n  constructor(x: number, y: number, w: number, h: number) {\n    this.x = x\n    this.y = y\n    this.w = w\n    this.h = h\n  }\n  public set(box: Box) {\n    this.x = box.x\n    this.y = box.y\n    this.w = box.w\n    this.h = box.h\n  }\n  public set4(x: number, y: number, w: number, h: number) {\n    this.x = x\n    this.y = y\n    this.w = w\n    this.h = h\n  }\n  public setSize(w: number, h: number) {\n    this.w = w\n    this.h = h\n  }\n  public merge(box: Box) {}\n  public static mergeAll(boxes: Box[]) {\n    if (boxes.length == 0) return null\n    if (boxes.length == 1) return boxes[0]\n    let minx = Math.min(...boxes.map((b) => b.x))\n    let maxx = Math.max(...boxes.map((b) => b.x + b.w))\n    let miny = Math.min(...boxes.map((b) => b.y))\n    let maxy = Math.max(...boxes.map((b) => b.y + b.h))\n    return new Box(minx, miny, maxx - minx, maxy - miny)\n  }\n\n  public center() {\n    return new Vector2(this.x + this.w / 2, this.y + this.h / 2)\n  }\n}\n","export class Log {\n  public static Error(message: string) {\n    console.error(message);\n  }\n\n  public static blue(message: string) {\n    console.info(\"%c \" + message, \"color:blue;\");\n  }\n  public static red(message: string) {\n    console.info(\"%c \" + message, \"color:red;\");\n  }\n}\n","import { Vector2 } from \"./Vector\"\n\nexport class Transform {\n  public a: number\n  public b: number\n  public c: number\n  public d: number\n  public e: number\n  public f: number\n\n  constructor(\n    a: number,\n    b: number,\n    c: number,\n    d: number,\n    e: number,\n    f: number\n  ) {\n    this.a = a\n    this.b = b\n    this.c = c\n    this.d = d\n    this.e = e\n    this.f = f\n  }\n\n  public static identity() {\n    return new Transform(1, 0, 0, 1, 0, 0)\n  }\n  public static from(o: TransformLike) {\n    return new Transform(o.a, o.b, o.c, o.d, o.e, o.f)\n  }\n  public set(o: TransformLike) {\n    this.a = o.a\n    this.b = o.b\n    this.c = o.c\n    this.d = o.d\n    this.e = o.e\n    this.f = o.f\n  }\n  public setFromArray(arr: number[]) {\n    this.a = arr[0]\n    this.b = arr[1]\n    this.c = arr[2]\n    this.d = arr[3]\n    this.e = arr[4]\n    this.f = arr[5]\n  }\n  public copy(t: Transform) {\n    this.a = t.a\n    this.b = t.b\n    this.c = t.c\n    this.d = t.d\n    this.e = t.e\n    this.f = t.f\n    return this\n  }\n  public clone() {\n    return Transform.from(this)\n  }\n  public reset() {\n    this.a = 1\n    this.b = 0\n    this.c = 0\n    this.d = 1\n    this.e = 0\n    this.f = 0\n    return this\n  }\n\n  public translate(v: Vector2) {\n    return this.translate2(v.x, v.y)\n  }\n  public translate2(x: number, y: number) {\n    this.e += x\n    this.f += y\n    return this\n    // return this.rightMultiply(new Transform(1, 0, 0, 1, x, y))\n  }\n  // @todo: 写该类的测试\n  public rotateAtOrigin(radius: number) {\n    let [sina, cosa] = [Math.sin(radius), Math.cos(radius)]\n    return this.rightMultiply(new Transform(cosa, sina, -sina, cosa, 0, 0))\n  }\n  public rotate(radius: number, p: Vector2) {\n    // T1 * R * T2 * CTM（平移旋转再平移）\n    return this.translate(Vector2.zeros().subtract(p))\n      .rotateAtOrigin(radius)\n      .translate(p)\n  }\n\n  public scale(x: number, y: number, p: Vector2) {\n    return this.copy(\n      Transform.identity()\n        .translate(p.opposite())\n        .scaleAtOrigin(x, y)\n        .translate(p)\n        .rightMultiply(this)\n    )\n  }\n  public scaleAtOrigin(x, y) {\n    this.a *= x\n    this.e *= x\n    this.d *= y\n    this.f *= y\n    return this\n  }\n\n  public flipY() {\n    const { a, b, c, d, e, f } = this\n    let [x, y] = [1 / 2, 1 / 2]\n    let [x1, y1] = [a * x + c * y + e, b * x + d * y + f]\n    this.rightMultiply(new Transform(-1, 0, 0, 1, 0, 0)).translate2(2 * x1, 0)\n    return this\n  }\n\n  // 原矩阵在右边👉\n  public rightMultiply(tm: Transform) {\n    let a = tm.a * this.a + tm.c * this.b\n    let b = tm.b * this.a + tm.d * this.b\n    let c = tm.a * this.c + tm.c * this.d\n    let d = tm.b * this.c + tm.d * this.d\n    let e = tm.a * this.e + tm.c * this.f + tm.e\n    let f = tm.b * this.e + tm.d * this.f + tm.f\n    this.a = a\n    this.b = b\n    this.c = c\n    this.d = d\n    this.e = e\n    this.f = f\n    return this\n  }\n  public leftMultiply(tm: Transform) {}\n\n  // 矩阵的逆\n  public inverse() {\n    let { a, b, c, d, e, f } = this\n    let detA = a * d - b * c\n    return new Transform(\n      d / detA,\n      -b / detA,\n      -c / detA,\n      a / detA,\n      (c * f - d * e) / detA,\n      (b * e - a * f) / detA\n    )\n  }\n\n  // @todo: 放在此处不太规范，耦合性太强\n  public cssString() {\n    return `matrix(${this.a},${this.b},${this.c},${this.d},${this.e},${this.f})`\n  }\n}\n\ninterface TransformLike {\n  a: number\n  b: number\n  c: number\n  d: number\n  e: number\n  f: number\n}\n\nexport class Matrix {}\n","import { Box } from \"./Box\"\nimport { Transform } from \"./Transform\"\nimport { Vector2 } from \"./Vector\"\n\nexport class Area {\n  private _box: Box\n  public get box(): Box {\n    return this._box\n  }\n  public set box(value: Box) {\n    this._box = value\n  }\n  private _transform: Transform\n  public get transform(): Transform {\n    return this._transform\n  }\n  public set transform(value: Transform) {\n    this._transform = value\n  }\n  constructor(box: Box, tranform: Transform) {\n    this.box = box\n    this.transform = tranform\n  }\n\n  public include(p: Vector2) {\n    // @todo: finish this with transform\n    let pp = p.clone().applyTransform(this._transform.inverse())\n    return (\n      pp.x < this.box.x2 &&\n      pp.x > this.box.x &&\n      pp.y < this.box.y2 &&\n      pp.y > this.box.y\n    )\n  }\n\n  public nearestCornerDistance(p: Vector2) {\n    let pp = p.clone().applyTransform(this._transform.inverse())\n    // 逆时针顺序\n    let corners = [\n      new Vector2(this.box.x, this.box.y),\n      new Vector2(this.box.x, this.box.y2),\n      new Vector2(this.box.x2, this.box.y2),\n      new Vector2(this.box.x2, this.box.y),\n    ]\n    let distances = corners.map((c) => c.distance(pp))\n    return distances\n  }\n\n  public center() {\n    return this.box.center().clone().applyTransform(this.transform)\n  }\n}\n","import { Box } from \"./Box\"\nimport { Board } from \"./Board\"\nimport { Log } from \"./Log\"\nimport { Transform } from \"./Transform\"\nimport { Vector2 } from \"./Vector\"\nimport { Area } from \"./Area\"\n\nexport abstract class BaseElement {\n  protected id: string\n  protected board: Board\n  protected _area: Area\n  public get area(): Area {\n    return this._area\n  }\n  public set area(value: Area) {\n    this._area = value\n  }\n  protected _domInstance: SVGElement\n  public get domInstance(): SVGElement {\n    if (!this._domInstance) this.createDomInstance()\n    return this._domInstance\n  }\n  public set domInstance(value: SVGElement) {\n    this._domInstance = value\n  }\n  protected _frameWidth: number\n  public get frameWidth(): number {\n    return this._frameWidth\n  }\n  public set frameWidth(value: number) {\n    this._frameWidth = value\n  }\n  protected _frameHeight: number\n  public get frameHeight(): number {\n    return this._frameHeight\n  }\n  public set frameHeight(value: number) {\n    this._frameHeight = value\n  }\n  protected absoluteBBox: Box\n  protected _transform: Transform\n  public get transform(): Transform {\n    return this._transform\n  }\n  public set transform(value: Transform) {\n    this._transform = value\n  }\n  // 元素的 AABB 框，在对元素进行变换时需要更新\n  private _AABB: Box\n  public get AABB(): Box {\n    return this._AABB\n  }\n  public set AABB(value: Box) {\n    this._AABB = value\n  }\n  // 额外的位置信息（受旋转影响），用于将来绑定编辑面板上元素位置信息，一定要区分它和 transform 的区别\n  // 注意旋转，位移，缩放后都要及时更新该信息\n  protected position: Vector2\n  protected _zIndex: number\n  public get zIndex(): number {\n    return this._zIndex\n  }\n  public set zIndex(value: number) {\n    this._zIndex = value\n  }\n  constructor(x: number, y: number, w: number, h: number) {\n    this.frameWidth = w\n    this.frameHeight = h\n    this.transform = Transform.identity()\n    this.transform.reset().translate2(x, y)\n    this.board = (window as any).board\n    this.AABB = new Box(x, y, w, h)\n    this.area = new Area(this.AABB, this.transform)\n    // @todo: get the right index\n    this.zIndex = 0\n\n    this.board.eventEmitter.on(\"createSart\", this.onCreateStart.bind(this))\n    this.board.eventEmitter.on(\"creating\", this.onCreating.bind(this))\n    this.board.eventEmitter.on(\"createEnd\", this.onCreateEnd.bind(this))\n  }\n\n  public onCreateStart() {}\n  public onCreating() {\n    Log.blue(\"on creating in baseelement\")\n  }\n  public onCreateEnd() {}\n\n  public setFrameWidth(w: number) {\n    this.frameWidth = w\n  }\n  public setFrameHeight(h: number) {\n    this.frameHeight = h\n  }\n  protected abstract createDomInstance(): void\n  public abstract updateRendering(): void\n}\n","export const Default = {\n  fill: \"#d9d9d9\",\n};\n","export const NS = {\n  HTML: \"http://www.w3.org/1999/xhtml\",\n  MATH: \"http://www.w3.org/1998/Math/MathML\",\n  SE: \"http://svg-edit.googlecode.com\",\n  SVG: \"http://www.w3.org/2000/svg\",\n  XLINK: \"http://www.w3.org/1999/xlink\",\n  OI: \"http://www.optimistik.fr/namespace/svg/OIdata\",\n  XML: \"http://www.w3.org/XML/1998/namespace\",\n  XMLNS: \"http://www.w3.org/2000/xmlns/\", // see http://www.w3.org/TR/REC-xml-names/#xmlReserved\n};\n","import { NS } from \"./namespaces\";\n\nexport const generateSvgElement = (docuemnt: Document, attributes?: any) => {\n  let ele = docuemnt.createElementNS(NS.SVG, \"svg\") as SVGElement;\n  if (!attributes) return;\n  Object.keys(attributes).forEach((key) => {\n    ele.setAttribute(key, attributes[key]);\n  });\n  return ele;\n};\n\nexport const setAttr = (element: Element, attr: any) => {\n  Object.keys(attr).forEach((key) => {\n    element.setAttribute(key, attr[key]);\n  });\n};\n","import { BaseElement } from \"./BaseElement\";\nimport { Default } from \"./Constant\";\nimport { NS } from \"./namespaces\";\nimport { setAttr } from \"./utilities\";\n\ninterface EllipseAttr {\n  cx: number;\n  cy: number;\n  rx: number;\n  ry: number;\n}\n\nexport class ELLIPSE extends BaseElement {\n  private attr: EllipseAttr;\n\n  // public get domInstance(): SVGEllipseElement {\n  //   if (!this._domInstance) this._domInstance = this.createDomInstance();\n  //   return this._domInstance;\n  // }\n  // public set domInstance(value: SVGEllipseElement) {\n  //   this._domInstance = value;\n  // }\n\n  constructor(x: number, y: number, width: number, height: number) {\n    super(x, y, width, height);\n\n    this.attr = {\n      cx: this.frameWidth / 2,\n      cy: this.frameHeight / 2,\n      rx: this.frameWidth / 2,\n      ry: this.frameHeight / 2,\n    };\n  }\n\n  protected createDomInstance() {\n    const element = document.createElementNS(\n      NS.SVG,\n      \"ellipse\"\n    ) as SVGEllipseElement;\n    setAttr(element, this.attr);\n    setAttr(element, { fill: Default.fill });\n    this._domInstance = element;\n  }\n\n  public updateAttr() {\n    this.attr = {\n      cx: this.frameWidth / 2,\n      cy: this.frameHeight / 2,\n      rx: this.frameWidth / 2,\n      ry: this.frameHeight / 2,\n    };\n  }\n\n  public updateRendering(): void {\n    this.updateAttr();\n    setAttr(this._domInstance, this.attr);\n    const { a, b, c, d, e, f } = this._transform;\n    setAttr(this._domInstance, {\n      transform: `matrix(${a},${b},${c},${d},${e},${f})`,\n    });\n  }\n\n  public onCreateStart(): void {}\n  public onCreating(): void {}\n  public onCreateEnd(): void {}\n}\n","export class EventEmitter {\n  private callbacks: any;\n\n  constructor() {\n    this.callbacks = {};\n  }\n\n  // @todo: define type of callbacks\n  public on(name: string, callback: (e: BoardEvent) => void) {\n    const that = this;\n\n    if (typeof name === \"undefined\" || name === \"\") {\n      console.warn(\"wrong names\");\n      return false;\n    }\n\n    if (typeof callback === \"undefined\") {\n      console.warn(\"wrong callback\");\n      return false;\n    }\n\n    (that.callbacks[name] || (that.callbacks[name] = [])).push(callback);\n\n    return this;\n  }\n\n  public off(name: string) {\n    if (typeof name === \"undefined\" || name === \"\") {\n      console.warn(\"wrong name\");\n      return false;\n    }\n\n    if (this.callbacks[name] instanceof Array) {\n      delete this.callbacks[name];\n    }\n\n    return this;\n  }\n\n  trigger(name: string, _args: any[]) {\n    if (typeof name === \"undefined\" || name === \"\") {\n      console.warn(\"wrong name\");\n      return false;\n    }\n    const args = !(_args instanceof Array) ? [] : _args;\n\n    if (!this.callbacks[name]) return;\n    this.callbacks[name].forEach((callback) => {\n      callback.apply(this, args);\n    });\n  }\n}\n\nexport class BoardEvent {\n  private _name: string;\n  public get name(): string {\n    return this._name;\n  }\n  public set name(value: string) {\n    this._name = value;\n  }\n  private _mouseEvent: MouseEvent;\n  public get mouseEvent(): MouseEvent {\n    return this._mouseEvent;\n  }\n  public set mouseEvent(value: MouseEvent) {\n    this._mouseEvent = value;\n  }\n  private _customData: any;\n  public get customData(): any {\n    return this._customData;\n  }\n  public set customData(value: any) {\n    this._customData = value;\n  }\n  constructor(name: string, mouseEvent: MouseEvent) {\n    this.name = name;\n    this.mouseEvent = mouseEvent;\n  }\n}\n","import { BaseElement } from \"./BaseElement\";\nimport { Default } from \"./Constant\";\nimport { NS } from \"./namespaces\";\nimport { setAttr } from \"./utilities\";\n\ninterface RectAttr {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\nexport class Rect extends BaseElement {\n  private attr: RectAttr;\n\n  // public get domInstance(): SVGRectElement {\n  //   if (!this._domInstance) this._domInstance = this.createDomInstance();\n  //   return this._domInstance;\n  // }\n  // public set domInstance(value: SVGRectElement) {\n  //   this._domInstance = value;\n  // }\n\n  constructor(x: number, y: number, width: number, height: number) {\n    super(x, y, width, height);\n    this.attr = {\n      x: 0,\n      y: 0,\n      width: width,\n      height: height,\n    };\n  }\n\n  protected createDomInstance() {\n    const element = document.createElementNS(NS.SVG, \"rect\") as SVGRectElement;\n    setAttr(element, this.attr);\n    setAttr(element, { fill: Default.fill });\n    this._domInstance = element;\n  }\n\n  public updateAttr() {\n    this.attr.width = this.frameWidth;\n    this.attr.height = this.frameHeight;\n  }\n\n  private updateAABB() {\n    this.AABB.setSize(this.frameWidth, this.frameHeight);\n  }\n\n  public updateRendering(): void {\n    // @architecture: refractor to DI（改成依赖注入的方式，支持多平台，如 WebGL）\n    // @todo: frameWidth，frameHeight + rotation -> width, height\n    this.updateAttr();\n    setAttr(this._domInstance, this.attr);\n    const { a, b, c, d, e, f } = this._transform;\n    setAttr(this._domInstance, {\n      transform: `matrix(${a},${b},${c},${d},${e},${f})`,\n    });\n  }\n\n  // public onCreateStart(): void {}\n  public onCreating() {\n    this.updateAABB();\n  }\n  // public onCreateEnd(): void {}\n}\n","import { Board } from \"./Board\"\nimport { BoardEvent } from \"./EventEmitter\"\nimport { Log } from \"./Log\"\nimport { NS } from \"./namespaces\"\nimport { Transform } from \"./Transform\"\nimport { setAttr } from \"./utilities\"\n\n// @todo: refractor as a plugin\nexport class Selector {\n  private container: SVGElement\n  private selectorRoot: SVGGElement\n  private selectRect: SVGRectElement\n  private board: Board\n  private selectedRect: SVGRectElement\n  private selectedCorner: SVGGElement\n\n  private selectorTransform: Transform\n  constructor(board: Board) {\n    this.board = board\n    this.container = board.svgroot\n    this.selectorRoot = board.svgdoc.createElementNS(NS.SVG, \"g\") as SVGGElement\n    this.selectRect = board.svgdoc.createElementNS(\n      NS.SVG,\n      \"rect\"\n    ) as SVGRectElement\n    this.selectedRect = board.svgdoc.createElementNS(\n      NS.SVG,\n      \"rect\"\n    ) as SVGRectElement\n    // @todo: 一些初始设置blabla\n    setAttr(this.selectRect, {\n      fill: \"#f00\",\n      stroke: \"#66c\",\n      \"stroke-width\": \"0.5\",\n      \"fill-opacity\": \"0.15\",\n      display: \"none\",\n    })\n    setAttr(this.selectedRect, {\n      fill: \"none\",\n      stroke: \"#009aff\",\n      \"stroke-width\": \"2.5\",\n      \"fill-opacity\": \"0.15\",\n      display: \"none\",\n    })\n    this.selectorRoot.append(this.selectRect)\n    this.selectorRoot.append(this.selectedRect)\n    this.container.append(this.selectorRoot)\n\n    board.eventEmitter.on(\"selectStart\", this.onSelectStart.bind(this))\n    board.eventEmitter.on(\"selectMove\", this.onSelectMove.bind(this))\n    board.eventEmitter.on(\"selectEnd\", this.onSelectEnd.bind(this))\n    board.eventEmitter.on(\"elementSelected\", this.onElemetSelected.bind(this))\n    board.eventEmitter.on(\"nothingSelected\", this.onNothingSelected.bind(this))\n    board.eventEmitter.on(\"draging\", this.onDraging.bind(this))\n    board.eventEmitter.on(\"rotating\", this.onRotating.bind(this))\n    board.eventEmitter.on(\"scaling\", this.onScaling.bind(this))\n  }\n\n  private onSelectStart(e) {}\n\n  private onSelectMove(e) {\n    setAttr(this.selectRect, {\n      display: \"inline\",\n      x: Math.min(e.customData.startX, e.customData.endX),\n      y: Math.min(e.customData.startY, e.customData.endY),\n      width: Math.abs(e.customData.endX - e.customData.startX),\n      height: Math.abs(e.customData.endY - e.customData.startY),\n    })\n  }\n  private onSelectEnd(e: BoardEvent) {\n    this.selectRect.setAttribute(\"display\", \"none\")\n    this.selectRect.setAttribute(\"width\", \"0\")\n    this.selectRect.setAttribute(\"height\", \"0\")\n  }\n\n  // @todo: drag 时更新选择框\n\n  private onElemetSelected(e: BoardEvent) {\n    const elements = this.board.selection\n    const area = e.customData.area\n    // 获取最大宽高，若一个元素，则取该元素的 BBOX，多个元素则取 AABB 的并集\n    if (!elements) return\n    if (elements.length === 1) {\n      const { transform, frameWidth, frameHeight } = elements[0]\n      this.selectorTransform = transform.clone()\n      let rect = { x: 0, y: 0, width: frameWidth, height: frameHeight }\n      setAttr(this.selectedRect, {\n        transform: transform.cssString(),\n        display: \"inline\",\n        ...rect,\n      })\n    } else {\n      // console.log(elements.map((n) => n.AABB));\n    }\n  }\n\n  private onNothingSelected(e: BoardEvent) {\n    setAttr(this.selectedRect, {\n      display: \"none\",\n    })\n  }\n\n  private onDragStart(e: BoardEvent) {}\n\n  private onDraging(e: BoardEvent) {\n    // @todo: 应该把其中的逻辑抽取出来调用，不该直接调用回调\n    this.onElemetSelected(e)\n  }\n\n  private onRotating(e: BoardEvent) {\n    // @todo: 应该把其中的逻辑抽取出来调用，不该直接调用回调\n    this.updateRender()\n  }\n\n  private onScaling(e: BoardEvent) {\n    // @todo: 应该把其中的逻辑抽取出来调用，不该直接调用回调\n    this.updateRender()\n  }\n\n  private onElementCreateing(e: BoardEvent) {\n    const elements = this.board.selection\n    // 获取最大宽高，若一个元素，则取该元素的 BBOX，多个元素则取 AABB 的并集\n    if (!elements) return\n    if (elements.length === 1) {\n      const { transform, frameWidth, frameHeight } = elements[0]\n      let rect = { x: 0, y: 0, width: frameWidth, height: frameHeight }\n      setAttr(this.selectedRect, {\n        transform: transform.cssString(),\n        display: \"inline\",\n        ...rect,\n      })\n    }\n  }\n\n  private updateSelector() {}\n\n  private updateRender() {\n    const elements = this.board.selection\n    // 获取最大宽高，若一个元素，则取该元素的 BBOX，多个元素则取 AABB 的并集\n    if (!elements) return\n    if (elements.length === 1) {\n      const { transform, frameWidth, frameHeight } = elements[0]\n      setAttr(this.selectedRect, {\n        transform: transform.cssString(),\n        display: \"inline\",\n      })\n    }\n  }\n}\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { Board } from \"./svgBoard\";\nimport \"./index.css\";\nconsole.log(\"entry index.ts\");\n\nlet board = new Board(document.body);\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","nc","EditorMode","CreateMode","ResizeMode","MouseStatus","DIRECTION","x","y","_x","_y","value","Math","sqrt","ones","Vector2","zeros","add","v","subtract","dotMultiply","crossMultiply","angle","acos","min","mod","distance","pow","rotateAtOrigin","theta","cos","sin","applyTransform","transform","b","c","f","opposite","clone","w","h","_w","_h","set","box","set4","setSize","merge","mergeAll","boxes","minx","maxx","max","miny","Box","center","message","console","error","blue","info","red","identity","Transform","from","setFromArray","arr","copy","t","reset","translate","translate2","radius","sina","cosa","rightMultiply","rotate","p","scale","scaleAtOrigin","flipY","x1","tm","leftMultiply","inverse","detA","cssString","tranform","_box","_transform","include","pp","x2","y2","nearestCornerDistance","frameWidth","frameHeight","board","AABB","area","Area","zIndex","eventEmitter","on","onCreateStart","bind","onCreating","onCreateEnd","_area","_domInstance","createDomInstance","_frameWidth","_frameHeight","_AABB","_zIndex","Log","setFrameWidth","setFrameHeight","Default","NS","generateSvgElement","docuemnt","ele","createElementNS","keys","forEach","setAttr","attr","width","height","cx","cy","rx","ry","fill","updateAttr","updateRendering","BaseElement","callbacks","name","callback","warn","off","Array","trigger","_args","args","mouseEvent","_name","_mouseEvent","_customData","updateAABB","container","svgroot","selectorRoot","svgdoc","selectRect","selectedRect","stroke","display","append","onSelectStart","onSelectMove","onSelectEnd","onElemetSelected","onNothingSelected","onDraging","onRotating","onScaling","customData","startX","endX","startY","endY","abs","elements","selection","selectorTransform","rect","onDragStart","updateRender","onElementCreateing","updateSelector","boardX","boardY","MouseDown","mouseStartX","mouseStartY","lastZIndex","_mouseStatus","DRAG","saveOptions","selectionArea","plugins","currentMode","SELECT","currentResizeMode","CASUAL","rubberBox","curBBoxes","curConfig","dimensions","selectionTransforms","_eventEmitter","EventEmitter","_cachedEvent","BoardEvent","updateBoardPosition","svgAttributs","xmlns","xlinks","overflow","bgAttributes","canvasBg","_svgdoc","rectAttributes","svgcontent","initSelector","initEventHandler","initCustomEventHandler","_selection","mouseStatus","_svgroot","selector","Selector","addEventListener","handleMouseDown","handleMouseUp","handleClick","handleDBClick","handleMouseMove","handleKeyDown","onCreateElement","onCreateMove","onChangeMode","onDragEnd","onScaleStart","onMouseStatusChange","bbox","getBoundingClientRect","updateMouseStatus","clientX","clientY","distances","dis","cornerType","LT","LB","RB","RT","SCALE","ROTATE","exportSvg","setSelected","log","eventType","updateSelectionArea","setMode","mode","currentCreateMode","CREATE","type","clickOnSelectedArea","clickOnElement","RECT","ELLIPSE","LINE","Rect","domInstance","ellipse","className","onRotateStart","flag","PI","onRotateEnd","lastFrameWidth","lastFrameHeight","fx","fy","absx","absy","onScaleEnd","transforms","pos","sort","find","idPrefix","getInstance","EventHandler","instance","Board","body"],"sourceRoot":""}