{"version":3,"file":"index.js","mappings":"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","sources":["webpack://svg-editor/./src/index.css","webpack://svg-editor/./node_modules/css-loader/dist/runtime/api.js","webpack://svg-editor/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://svg-editor/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://svg-editor/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://svg-editor/webpack/bootstrap","webpack://svg-editor/webpack/runtime/compat get default export","webpack://svg-editor/webpack/runtime/define property getters","webpack://svg-editor/webpack/runtime/hasOwnProperty shorthand","webpack://svg-editor/webpack/runtime/publicPath","webpack://svg-editor/webpack/runtime/jsonp chunk loading","webpack://svg-editor/webpack/runtime/nonce","webpack://svg-editor/./src/svgBoard/Vector.ts","webpack://svg-editor/./src/svgBoard/Box.ts","webpack://svg-editor/./src/svgBoard/Log.ts","webpack://svg-editor/./src/svgBoard/Transform.ts","webpack://svg-editor/./src/svgBoard/Area.ts","webpack://svg-editor/./src/svgBoard/namespaces.ts","webpack://svg-editor/./src/svgBoard/utilities.ts","webpack://svg-editor/./src/svgBoard/BaseElement.ts","webpack://svg-editor/./src/svgBoard/Constant.ts","webpack://svg-editor/./src/svgBoard/Ellipse.ts","webpack://svg-editor/./src/svgBoard/EventEmitter.ts","webpack://svg-editor/./src/svgBoard/Rect.ts","webpack://svg-editor/./src/svgBoard/config.ts","webpack://svg-editor/./src/svgBoard/Manager.ts","webpack://svg-editor/./src/svgBoard/Selector.ts","webpack://svg-editor/./src/svgBoard/Board.ts","webpack://svg-editor/./src/svgBoard/MouseStatusManager.ts","webpack://svg-editor/./src/index.css?cfe4","webpack://svg-editor/./src/index.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"rotate.svg\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"html,\\nbody {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.cursor-crosshair {\\n  cursor: crosshair;\\n}\\n.cursor-pointer {\\n  cursor: pointer;\\n}\\n.cursor-default {\\n  cursor: default;\\n}\\n.cursor-grab {\\n  cursor: grab;\\n}\\n.cursor-resize {\\n  cursor: nwse-resize;\\n}\\n.cursor-move {\\n  cursor: move;\\n}\\n.cursor-rotate {\\n  cursor: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \"), url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") 5 5, progress;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/index.css\"],\"names\":[],\"mappings\":\"AAAA;;EAEE,SAAS;EACT,UAAU;AACZ;;AAEA;EACE,iBAAiB;AACnB;AACA;EACE,eAAe;AACjB;AACA;EACE,eAAe;AACjB;AACA;EACE,YAAY;AACd;AACA;EACE,mBAAmB;AACrB;AACA;EACE,YAAY;AACd;AACA;EACE,sGAAsD;AACxD\",\"sourcesContent\":[\"html,\\nbody {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.cursor-crosshair {\\n  cursor: crosshair;\\n}\\n.cursor-pointer {\\n  cursor: pointer;\\n}\\n.cursor-default {\\n  cursor: default;\\n}\\n.cursor-grab {\\n  cursor: grab;\\n}\\n.cursor-resize {\\n  cursor: nwse-resize;\\n}\\n.cursor-move {\\n  cursor: move;\\n}\\n.cursor-rotate {\\n  cursor: url(rotate.svg), url(rotate.svg) 5 5, progress;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n\n  if (!url) {\n    return url;\n  }\n\n  url = String(url.__esModule ? url.default : url); // If url is already wrapped in quotes, remove them\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n\n  return url;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.p = \"/simple-svg-editor\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","__webpack_require__.nc = undefined;","import { Transform } from \"./Transform\"\n\nexport class Vector2 {\n  private _x: number\n  public get x(): number {\n    return this._x\n  }\n  public set x(value: number) {\n    this._x = value\n  }\n  private _y: number\n  public get y(): number {\n    return this._y\n  }\n  public set y(value: number) {\n    this._y = value\n  }\n  public get mod() {\n    return Math.sqrt(this.x * this.x + this.y * this.y)\n  }\n\n  constructor(x: number, y: number) {\n    this._x = x\n    this._y = y\n  }\n\n  public static ones() {\n    return new Vector2(1, 1)\n  }\n  public static zeros() {\n    return new Vector2(0, 0)\n  }\n  public add(v: Vector2) {\n    this._x += v.x\n    this._y += v.y\n    return this\n  }\n  public subtract(v: Vector2) {\n    this._x -= v.x\n    this._y -= v.y\n    return this\n  }\n  public dotMultiply(v: Vector2) {\n    this._x *= v.x\n    this._y *= v.y\n    return this\n  }\n\n  public crossMultiply(v: Vector2) {\n    return this._x * v.y - this._y * v.x\n  }\n\n  public angle(v: Vector2) {\n    return Math.acos(\n      Math.min((this._x * v.x + this._y * v.y) / this.mod / v.mod, 1)\n    )\n  }\n\n  public distance(v: Vector2) {\n    return Math.sqrt(Math.pow(this.x - v.x, 2) + Math.pow(this.y - v.y, 2))\n  }\n\n  public rotateAtOrigin(theta: number) {\n    let [x, y] = [\n      this.x * Math.cos(theta) - this.y * Math.sin(theta),\n      this.x * Math.sin(theta) + this.y * Math.cos(theta),\n    ]\n    this.x = x\n    this.y = y\n    return this\n  }\n\n  public applyTransform(transform: Transform) {\n    const { a, b, c, d, e, f } = transform\n    let [x, y] = [a * this.x + c * this.y + e, b * this.x + d * this.y + f]\n    this.x = x\n    this.y = y\n    return this\n  }\n\n  public opposite() {\n    return new Vector2(-this._x, -this._y)\n  }\n\n  public clone() {\n    return new Vector2(this.x, this.y)\n  }\n}\n","import { Vector2 } from \"./Vector\"\n\nexport class Box {\n  private _x: number\n  public get x(): number {\n    return this._x\n  }\n  public set x(value: number) {\n    this._x = value\n  }\n  private _y: number\n  public get y(): number {\n    return this._y\n  }\n  public set y(value: number) {\n    this._y = value\n  }\n  private _w: number\n  public get w(): number {\n    return this._w\n  }\n  public set w(value: number) {\n    this._w = value\n  }\n  private _h: number\n  public get h(): number {\n    return this._h\n  }\n  public set h(value: number) {\n    this._h = value\n  }\n  public get x2(): number {\n    return this._x + this._w\n  }\n  public get y2(): number {\n    return this._y + this._h\n  }\n  constructor(x: number, y: number, w: number, h: number) {\n    this.x = x\n    this.y = y\n    this.w = w\n    this.h = h\n  }\n  public set(box: Box) {\n    this.x = box.x\n    this.y = box.y\n    this.w = box.w\n    this.h = box.h\n  }\n  public set4(x: number, y: number, w: number, h: number) {\n    this.x = x\n    this.y = y\n    this.w = w\n    this.h = h\n  }\n  public setSize(w: number, h: number) {\n    this.w = w\n    this.h = h\n  }\n  public clone() {\n    return new Box(this.x, this.y, this._w, this._h)\n  }\n  public merge(box: Box) {}\n  public static mergeAll(boxes: Box[]) {\n    if (boxes.length == 0) return null\n    if (boxes.length == 1) return boxes[0]\n    let minx = Math.min(...boxes.map((b) => b.x))\n    let maxx = Math.max(...boxes.map((b) => b.x + b.w))\n    let miny = Math.min(...boxes.map((b) => b.y))\n    let maxy = Math.max(...boxes.map((b) => b.y + b.h))\n    return new Box(minx, miny, maxx - minx, maxy - miny)\n  }\n\n  public center() {\n    return new Vector2(this.x + this.w / 2, this.y + this.h / 2)\n  }\n\n  public toVector2() {\n    return [\n      new Vector2(this.x, this.y),\n      new Vector2(this.x, this.y2),\n      new Vector2(this.x2, this.y2),\n      new Vector2(this.x2, this.y),\n    ]\n  }\n}\n","export class Log {\n  public static Error(message: string) {\n    console.error(message);\n  }\n\n  public static blue(message: string) {\n    console.info(\"%c \" + message, \"color:blue;\");\n  }\n  public static red(message: string) {\n    console.info(\"%c \" + message, \"color:red;\");\n  }\n}\n","import { Vector2 } from \"./Vector\"\n\nexport class Transform {\n  public a: number\n  public b: number\n  public c: number\n  public d: number\n  public e: number\n  public f: number\n\n  public get rotation() {\n    // @todo: 未考虑缩放为负数的情况\n    let t = Math.acos(this.a / Math.sqrt(this.a * this.a + this.c * this.c))\n    return this.c > 0 ? Math.PI * 2 - t : t\n  }\n  public get rotationTransform() {\n    return Transform.fromAngle(this.rotation)\n  }\n\n  constructor(\n    a: number,\n    b: number,\n    c: number,\n    d: number,\n    e: number,\n    f: number\n  ) {\n    this.a = a\n    this.b = b\n    this.c = c\n    this.d = d\n    this.e = e\n    this.f = f\n  }\n\n  public static identity() {\n    return new Transform(1, 0, 0, 1, 0, 0)\n  }\n  public static from(o: TransformLike) {\n    return new Transform(o.a, o.b, o.c, o.d, o.e, o.f)\n  }\n  public static fromAngle(theta: number) {\n    return new Transform(\n      Math.cos(theta),\n      Math.sin(theta),\n      -Math.cos(theta),\n      Math.sin(theta),\n      0,\n      0\n    )\n  }\n  public set(o: TransformLike) {\n    this.a = o.a\n    this.b = o.b\n    this.c = o.c\n    this.d = o.d\n    this.e = o.e\n    this.f = o.f\n  }\n  public setFromArray(arr: number[]) {\n    this.a = arr[0]\n    this.b = arr[1]\n    this.c = arr[2]\n    this.d = arr[3]\n    this.e = arr[4]\n    this.f = arr[5]\n  }\n  public copy(t: Transform) {\n    this.a = t.a\n    this.b = t.b\n    this.c = t.c\n    this.d = t.d\n    this.e = t.e\n    this.f = t.f\n    return this\n  }\n  public clone() {\n    return Transform.from(this)\n  }\n  public reset() {\n    this.a = 1\n    this.b = 0\n    this.c = 0\n    this.d = 1\n    this.e = 0\n    this.f = 0\n    return this\n  }\n\n  public translate(v: Vector2) {\n    return this.translate2(v.x, v.y)\n  }\n  public translate2(x: number, y: number) {\n    this.e += x\n    this.f += y\n    return this\n    // return this.rightMultiply(new Transform(1, 0, 0, 1, x, y))\n  }\n  // @todo: 写该类的测试\n  public rotateAtOrigin(radius: number) {\n    let [sina, cosa] = [Math.sin(radius), Math.cos(radius)]\n    return this.rightMultiply(new Transform(cosa, sina, -sina, cosa, 0, 0))\n  }\n  public rotate(radius: number, p: Vector2) {\n    // T1 * R * T2 * CTM（平移旋转再平移）\n    return this.translate(Vector2.zeros().subtract(p))\n      .rotateAtOrigin(radius)\n      .translate(p)\n  }\n\n  public scale(x: number, y: number, p: Vector2) {\n    return this.copy(\n      Transform.identity()\n        .translate(p.opposite())\n        .scaleAtOrigin(x, y)\n        .translate(p)\n        .rightMultiply(this)\n    )\n  }\n  public scale2(x: number, y: number, p: Vector2) {\n    return this.translate(p.opposite()).scale2AtOrigin(x, y).translate(p)\n  }\n  public scale2AtOrigin(x: number, y: number) {\n    return this.rightMultiply(new Transform(x, 0, 0, y, 0, 0))\n  }\n\n  public scaleAtOrigin(x, y) {\n    this.a *= x\n    this.e *= x\n    this.d *= y\n    this.f *= y\n    return this\n  }\n\n  public flipY() {\n    const { a, b, c, d, e, f } = this\n    let [x, y] = [1 / 2, 1 / 2]\n    let [x1, y1] = [a * x + c * y + e, b * x + d * y + f]\n    this.rightMultiply(new Transform(-1, 0, 0, 1, 0, 0)).translate2(2 * x1, 0)\n    return this\n  }\n\n  // 原矩阵在右边👉\n  public rightMultiply(tm: Transform) {\n    let a = tm.a * this.a + tm.c * this.b\n    let b = tm.b * this.a + tm.d * this.b\n    let c = tm.a * this.c + tm.c * this.d\n    let d = tm.b * this.c + tm.d * this.d\n    let e = tm.a * this.e + tm.c * this.f + tm.e\n    let f = tm.b * this.e + tm.d * this.f + tm.f\n    this.a = a\n    this.b = b\n    this.c = c\n    this.d = d\n    this.e = e\n    this.f = f\n    return this\n  }\n  public leftMultiply(tm: Transform) {}\n\n  // 矩阵的逆\n  public inverse() {\n    let { a, b, c, d, e, f } = this\n    let detA = a * d - b * c\n    return new Transform(\n      d / detA,\n      -b / detA,\n      -c / detA,\n      a / detA,\n      (c * f - d * e) / detA,\n      (b * e - a * f) / detA\n    )\n  }\n\n  // @todo: 放在此处不太规范，耦合性太强\n  public cssString() {\n    return `matrix(${this.a},${this.b},${this.c},${this.d},${this.e},${this.f})`\n  }\n}\n\ninterface TransformLike {\n  a: number\n  b: number\n  c: number\n  d: number\n  e: number\n  f: number\n}\n\nexport class Matrix {}\n","import { Box } from \"./Box\"\nimport { Transform } from \"./Transform\"\nimport { Vector2 } from \"./Vector\"\n\nexport class Area {\n  private _box: Box\n  public get box(): Box {\n    return this._box\n  }\n  public set box(value: Box) {\n    this._box = value\n  }\n  private _transform: Transform\n  public get transform(): Transform {\n    return this._transform\n  }\n  public set transform(value: Transform) {\n    this._transform = value\n  }\n  constructor(box: Box, tranform: Transform) {\n    this.box = box\n    this.transform = tranform\n  }\n\n  public clone() {\n    return new Area(this.box.clone(), this.transform.clone())\n  }\n\n  public include(p: Vector2) {\n    // @todo: finish this with transform\n    let pp = p.clone().applyTransform(this._transform.inverse())\n    // debugger\n    return (\n      pp.x < this.box.x2 &&\n      pp.x > this.box.x &&\n      pp.y < this.box.y2 &&\n      pp.y > this.box.y\n    )\n  }\n\n  public nearestCornerDistance(p: Vector2) {\n    // 逆时针顺序\n    let corners = [\n      new Vector2(this.box.x, this.box.y),\n      new Vector2(this.box.x, this.box.y2),\n      new Vector2(this.box.x2, this.box.y2),\n      new Vector2(this.box.x2, this.box.y),\n    ]\n    let distances = corners\n      .map((c) => c.applyTransform(this._transform))\n      .map((c) => c.distance(p))\n    return distances\n  }\n\n  public center() {\n    return this.box.center().clone().applyTransform(this.transform)\n  }\n}\n","export const NS = {\n  HTML: \"http://www.w3.org/1999/xhtml\",\n  MATH: \"http://www.w3.org/1998/Math/MathML\",\n  SE: \"http://svg-edit.googlecode.com\",\n  SVG: \"http://www.w3.org/2000/svg\",\n  XLINK: \"http://www.w3.org/1999/xlink\",\n  OI: \"http://www.optimistik.fr/namespace/svg/OIdata\",\n  XML: \"http://www.w3.org/XML/1998/namespace\",\n  XMLNS: \"http://www.w3.org/2000/xmlns/\", // see http://www.w3.org/TR/REC-xml-names/#xmlReserved\n};\n","import { NS } from \"./namespaces\"\n\nexport const generateSvgElement = (docuemnt: Document, attributes?: any) => {\n  let ele = docuemnt.createElementNS(NS.SVG, \"svg\") as SVGElement\n  if (!attributes) return\n  Object.keys(attributes).forEach((key) => {\n    ele.setAttribute(key, attributes[key])\n  })\n  return ele\n}\n\nexport const setAttr = (element: Element, attr: any) => {\n  Object.keys(attr).forEach((key) => {\n    element.setAttribute(key, attr[key])\n  })\n}\n\nlet id = 100000\n\nexport const generateId = () => {\n  return \"node-\" + id++\n}\n","import { Box } from \"./Box\"\nimport { Board } from \"./Board\"\nimport { Log } from \"./Log\"\nimport { Transform } from \"./Transform\"\nimport { Vector2 } from \"./Vector\"\nimport { Area } from \"./Area\"\nimport { generateId } from \"./utilities\"\n\nexport abstract class BaseElement {\n  protected _id: string\n  public get id(): string {\n    return this._id\n  }\n  public set id(value: string) {\n    this._id = value\n  }\n  protected board: Board\n  protected _area: Area\n  public get area(): Area {\n    return this._area\n  }\n  public set area(value: Area) {\n    this._area = value\n  }\n  protected _domInstance: SVGElement\n  public get domInstance(): SVGElement {\n    if (!this._domInstance) this.createDomInstance()\n    return this._domInstance\n  }\n  public set domInstance(value: SVGElement) {\n    this._domInstance = value\n  }\n  public get frameWidth(): number {\n    return this.transform.a\n  }\n  public get frameHeight(): number {\n    return this.transform.d\n  }\n  protected absoluteBBox: Box\n  protected _transform: Transform\n  public get transform(): Transform {\n    return this._transform\n  }\n  public set transform(value: Transform) {\n    this._transform = value\n  }\n  // 元素的 AABB 框，在对元素进行变换时需要更新\n  private _AABB: Box\n  public get AABB(): Box {\n    return this._AABB\n  }\n  public set AABB(value: Box) {\n    this._AABB = value\n  }\n  // 额外的位置信息（受旋转影响），用于将来绑定编辑面板上元素位置信息，一定要区分它和 transform 的区别\n  // 注意旋转，位移，缩放后都要及时更新该信息\n  protected position: Vector2\n  protected _zIndex: number\n  public get zIndex(): number {\n    return this._zIndex\n  }\n  public set zIndex(value: number) {\n    this._zIndex = value\n  }\n\n  private _points: Vector2[]\n  public get points(): Vector2[] {\n    return this._points\n  }\n  public set points(value: Vector2[]) {\n    this._points = value\n  }\n\n  constructor(x: number, y: number, w: number, h: number) {\n    this.id = generateId()\n    this.transform = Transform.identity()\n    this.transform.a = w\n    this.transform.d = h\n    this.transform.translate2(x, y)\n    this.board = (window as any).board\n    this.AABB = new Box(x, y, w, h)\n    this.area = new Area(new Box(0, 0, 1, 1), this.transform)\n    // @todo: get the right index\n    this.zIndex = 0\n\n    this.board.eventEmitter.on(\"createSart\", this.onCreateStart.bind(this))\n    this.board.eventEmitter.on(\"creating\", this.onCreating.bind(this))\n    this.board.eventEmitter.on(\"createEnd\", this.onCreateEnd.bind(this))\n  }\n\n  public onCreateStart() {}\n  public onCreating() {\n    Log.blue(\"on creating in baseelement\")\n    if (this.board.selection[0] == this) {\n    }\n  }\n  public onCreateEnd() {}\n\n  // public setFrameWidth(w: number) {\n  //   this.frameWidth = w\n  // }\n  // public setFrameHeight(h: number) {\n  //   this.frameHeight = h\n  // }\n  protected abstract createDomInstance(): void\n  public abstract updateRendering(): void\n\n  // everytime element is transformed, this should be call\n  public updatePoints() {\n    let corners = this.area.box.toVector2()\n    this.points = corners.map((p) => p.applyTransform(this.transform))\n  }\n\n  protected updateAABB() {\n    let minX = Math.min(...this.points.map((p) => p.x))\n    let minY = Math.min(...this.points.map((p) => p.y))\n    let maxX = Math.max(...this.points.map((p) => p.x))\n    let maxY = Math.max(...this.points.map((p) => p.y))\n    // this.AABB.setSize(this.frameWidth, this.frameHeight)\n    this.AABB.set4(minX, minY, maxX - minX, maxY - minY)\n  }\n}\n","export const Default = {\n  fill: \"#d9d9d9\",\n};\n","import { BaseElement } from \"./BaseElement\"\nimport { Default } from \"./Constant\"\nimport { NS } from \"./namespaces\"\nimport { Transform } from \"./Transform\"\nimport { setAttr } from \"./utilities\"\n\ninterface EllipseAttr {\n  cx: number\n  cy: number\n  rx: number\n  ry: number\n}\n\nexport class ELLIPSE extends BaseElement {\n  private attr: EllipseAttr\n\n  constructor(x: number, y: number, width: number, height: number) {\n    super(x, y, width, height)\n\n    this.attr = {\n      cx: 0,\n      cy: 0,\n      rx: 1 / 2,\n      ry: 1 / 2,\n    }\n  }\n\n  protected createDomInstance() {\n    const element = document.createElementNS(\n      NS.SVG,\n      \"ellipse\"\n    ) as SVGEllipseElement\n    setAttr(element, this.attr)\n    setAttr(element, { fill: Default.fill })\n    this._domInstance = element\n  }\n\n  public updateAttr() {\n    this.attr = {\n      cx: 0,\n      cy: 0,\n      rx: 1 / 2,\n      ry: 1 / 2,\n    }\n  }\n\n  public updateRendering(): void {\n    this.updateAttr()\n    this.updatePoints()\n    this.updateAABB()\n    setAttr(this._domInstance, this.attr)\n    // svg 渲染椭圆在缩放时中心位置也会跟着缩放，cx, cy设置为 0 可避免该问题，但渲染位置就要做适当的偏移\n    let transform = new Transform(1, 0, 0, 1, 1 / 2, 1 / 2).rightMultiply(\n      this._transform\n    )\n    const { a, b, c, d, e, f } = transform\n    setAttr(this._domInstance, {\n      transform: `matrix(${a},${b},${c},${d},${e},${f})`,\n    })\n  }\n\n  public onCreateStart(): void {}\n  public onCreating(): void {}\n  public onCreateEnd(): void {}\n}\n","export class EventEmitter {\n  private callbacks: any\n\n  constructor() {\n    this.callbacks = {}\n  }\n\n  // @todo: define type of callbacks\n  public on(name: string, callback: (e: BoardEvent) => void) {\n    const that = this\n\n    if (typeof name === \"undefined\" || name === \"\") {\n      console.warn(\"wrong names\")\n      return false\n    }\n\n    if (typeof callback === \"undefined\") {\n      console.warn(\"wrong callback\")\n      return false\n    }\n\n    ;(that.callbacks[name] || (that.callbacks[name] = [])).push(callback)\n\n    return this\n  }\n\n  public off(name: string) {\n    if (typeof name === \"undefined\" || name === \"\") {\n      console.warn(\"wrong name\")\n      return false\n    }\n\n    if (this.callbacks[name] instanceof Array) {\n      delete this.callbacks[name]\n    }\n\n    return this\n  }\n\n  trigger(name: string, _args: any[]) {\n    if (typeof name === \"undefined\" || name === \"\") {\n      console.warn(\"wrong name\")\n      return false\n    }\n    const args = !(_args instanceof Array) ? [] : _args\n\n    if (!this.callbacks[name]) return\n    this.callbacks[name].forEach((callback) => {\n      callback.apply(this, args)\n    })\n  }\n}\n\nexport class BoardEvent {\n  private _name: string\n  public get name(): string {\n    return this._name\n  }\n  public set name(value: string) {\n    this._name = value\n  }\n  private _mouseEvent: MouseEvent\n  public get mouseEvent(): MouseEvent {\n    return this._mouseEvent\n  }\n  public set mouseEvent(value: MouseEvent) {\n    this._mouseEvent = value\n  }\n  private _customData: any\n  public get customData(): any {\n    return this._customData\n  }\n  public set customData(value: any) {\n    this._customData = value\n  }\n  constructor(name: string, mouseEvent: MouseEvent) {\n    this.name = name\n    this.mouseEvent = mouseEvent\n  }\n}\n","import { BaseElement } from \"./BaseElement\"\nimport { Default } from \"./Constant\"\nimport { NS } from \"./namespaces\"\nimport { setAttr } from \"./utilities\"\n\ninterface RectAttr {\n  x: number\n  y: number\n  width: number\n  height: number\n}\nexport class Rect extends BaseElement {\n  private attr: RectAttr\n\n  // public get domInstance(): SVGRectElement {\n  //   if (!this._domInstance) this._domInstance = this.createDomInstance();\n  //   return this._domInstance;\n  // }\n  // public set domInstance(value: SVGRectElement) {\n  //   this._domInstance = value;\n  // }\n\n  constructor(x: number, y: number, width: number, height: number) {\n    super(x, y, width, height)\n    this.attr = {\n      x: 0,\n      y: 0,\n      width: 1,\n      height: 1,\n    }\n  }\n\n  protected createDomInstance() {\n    const element = document.createElementNS(NS.SVG, \"rect\") as SVGRectElement\n    setAttr(element, this.attr)\n    setAttr(element, { fill: Default.fill })\n    this._domInstance = element\n  }\n\n  public updateAttr() {\n    this.attr.width = this.frameWidth\n    this.attr.height = this.frameHeight\n  }\n\n  public updateRendering(): void {\n    this.updatePoints()\n    this.updateAABB()\n    const { a, b, c, d, e, f } = this._transform\n    setAttr(this._domInstance, {\n      transform: `matrix(${a},${b},${c},${d},${e},${f})`,\n    })\n  }\n\n  // public onCreateStart(): void {}\n  public onCreating() {\n    this.updateAABB()\n  }\n  // public onCreateEnd(): void {}\n}\n","const config = {\n  COLOR_SELECT: \"#009aff\",\n}\n\nexport default config\n","import { Board } from \"./Board\"\nimport { BoardEvent, EventEmitter } from \"./EventEmitter\"\n\ninterface IManager {}\n\nexport class Manager implements IManager {\n  board: Board\n  protected eventEmitter: EventEmitter\n\n  constructor(board: Board) {\n    this.board = board\n    this.eventEmitter = this.board.eventEmitter\n\n    this.board.eventEmitter.on(\"mouseDown\", this.onMouseDown.bind(this))\n    this.board.eventEmitter.on(\"mouseMove\", this.onMouseMove.bind(this))\n    this.board.eventEmitter.on(\"mouseUp\", this.onMouseUp.bind(this))\n  }\n\n  public onMouseDown(e: BoardEvent) {}\n  public onMouseMove(e: BoardEvent) {}\n  public onMouseUp(e: BoardEvent) {}\n}\n","import { Area } from \"./Area\"\nimport { Board } from \"./Board\"\nimport { Box } from \"./Box\"\nimport config from \"./config\"\nimport { BoardEvent } from \"./EventEmitter\"\nimport { Log } from \"./Log\"\nimport { Manager } from \"./Manager\"\nimport { NS } from \"./namespaces\"\nimport { Transform } from \"./Transform\"\nimport { setAttr } from \"./utilities\"\nimport { Vector2 } from \"./Vector\"\n\n// @todo: refractor as a plugin\nexport class Selector extends Manager {\n  private container: SVGElement\n  private selectorRoot: SVGGElement\n  private selectRect: SVGRectElement\n  private activeGroup: SVGGElement\n  private activeMap: Map<string, SVGPathElement>\n  private manuplator: SVGGElement\n  private manuplatorRect: SVGPathElement\n  private manuplatorPoints: SVGGElement\n  private selectedCorner: SVGGElement\n  private selectArea: Area\n  private lastSelectedNum: number\n\n  private selectorTransform: Transform\n  constructor(board: Board) {\n    super(board)\n    this.board = board\n    this.container = board.svgroot\n    this.selectorRoot = board.svgdoc.createElementNS(NS.SVG, \"g\") as SVGGElement\n    this.selectRect = board.svgdoc.createElementNS(\n      NS.SVG,\n      \"rect\"\n    ) as SVGRectElement\n    this.activeGroup = board.svgdoc.createElementNS(NS.SVG, \"g\") as SVGGElement\n    this.selectorRoot.append(this.activeGroup)\n    this.activeMap = new Map()\n\n    this.manuplator = board.svgdoc.createElementNS(NS.SVG, \"g\") as SVGGElement\n    this.selectorRoot.append(this.manuplator)\n    setAttr(this.manuplator, { display: \"none\" })\n\n    this.manuplatorRect = board.svgdoc.createElementNS(\n      NS.SVG,\n      \"path\"\n    ) as SVGPathElement\n    setAttr(this.manuplatorRect, {\n      fill: \"none\",\n      \"stroke-width\": 2.5,\n      stroke: config.COLOR_SELECT,\n    })\n    this.manuplator.append(this.manuplatorRect)\n    this.manuplatorPoints = board.svgdoc.createElementNS(\n      NS.SVG,\n      \"g\"\n    ) as SVGGElement\n    this.manuplator.append(this.manuplatorPoints)\n    for (let i = 0; i < 4; i++) {\n      let point = board.svgdoc.createElementNS(NS.SVG, \"path\")\n      setAttr(point, {\n        fill: \"#fcfcfc\",\n        \"stroke-width\": 1.5,\n        stroke: config.COLOR_SELECT,\n      })\n      this.manuplatorPoints.append(point)\n    }\n\n    this.lastSelectedNum = 0\n    this.selectArea = new Area(new Box(0, 0, 1, 1), Transform.identity())\n    // @todo: 一些初始设置blabla\n    setAttr(this.selectRect, {\n      fill: \"#f00\",\n      stroke: \"#66c\",\n      \"stroke-width\": \"0.5\",\n      \"fill-opacity\": \"0.15\",\n      display: \"none\",\n    })\n    this.selectorRoot.append(this.selectRect)\n    this.container.append(this.selectorRoot)\n\n    board.eventEmitter.on(\"selectStart\", this.onSelectStart.bind(this))\n    board.eventEmitter.on(\"selectMove\", this.onSelectMove.bind(this))\n    board.eventEmitter.on(\"selectEnd\", this.onSelectEnd.bind(this))\n    board.eventEmitter.on(\"elementSelected\", this.onElemetSelected.bind(this))\n    board.eventEmitter.on(\"nothingSelected\", this.onNothingSelected.bind(this))\n\n    board.eventEmitter.on(\"creating\", this.onCreating.bind(this))\n    board.eventEmitter.on(\"draging\", this.onDraging.bind(this))\n    board.eventEmitter.on(\"rotating\", this.onRotating.bind(this))\n    board.eventEmitter.on(\"scaling\", this.onScaling.bind(this))\n  }\n\n  private onSelectStart(e) {\n    setAttr(this.selectRect, { display: \"inline\" })\n  }\n\n  private onSelectMove(e) {\n    let x = Math.min(e.customData.startX, e.customData.endX)\n    let y = Math.min(e.customData.startY, e.customData.endY)\n    let width = Math.abs(e.customData.endX - e.customData.startX)\n    let height = Math.abs(e.customData.endY - e.customData.startY)\n\n    setAttr(this.selectRect, { x, y, width, height })\n    this.selectArea.box.x = x\n    this.selectArea.box.y = y\n    this.selectArea.box.w = width\n    this.selectArea.box.h = height\n    let selected = []\n    // @todo: 判断方式需要改一下，矩形相交\n    this.board.elements.forEach((e) => {\n      if (e.points.find((p) => this.selectArea.include(p))) {\n        selected.push(e)\n      }\n    })\n    if (this.lastSelectedNum != selected.length) {\n      this.board.setSelected(selected)\n      this.lastSelectedNum = selected.length\n    }\n  }\n  private onSelectEnd(e: BoardEvent) {\n    this.selectRect.setAttribute(\"display\", \"none\")\n    this.selectRect.setAttribute(\"width\", \"0\")\n    this.selectRect.setAttribute(\"height\", \"0\")\n  }\n\n  private onElemetSelected(e: BoardEvent) {\n    this.updateRender()\n  }\n\n  private onNothingSelected(e: BoardEvent) {\n    this.activeMap.forEach((ele) => setAttr(ele, { display: \"none\" }))\n    setAttr(this.manuplator, { display: \"none\" })\n  }\n\n  private onDragStart(e: BoardEvent) {}\n\n  private onCreateStart(e: BoardEvent) {}\n\n  private onCreating(e: BoardEvent) {\n    this.onElemetSelected(e)\n  }\n\n  private onDraging(e: BoardEvent) {\n    this.onElemetSelected(e)\n  }\n\n  private onRotating(e: BoardEvent) {\n    this.updateRender()\n  }\n\n  private onScaling(e: BoardEvent) {\n    this.updateRender()\n  }\n\n  private onElementCreateing(e: BoardEvent) {\n    const elements = this.board.selection\n    // 获取最大宽高，若一个元素，则取该元素的 BBOX，多个元素则取 AABB 的并集\n    if (!elements) return\n    if (elements.length === 1) {\n      const { transform, frameWidth, frameHeight } = elements[0]\n      let rect = { x: 0, y: 0, width: frameWidth, height: frameHeight }\n      setAttr(this.activeMap.get(elements[0].id), {\n        transform: transform.cssString(),\n        display: \"inline\",\n        ...rect,\n      })\n    }\n  }\n\n  private updateSelector() {}\n\n  private updateRender() {\n    this.clear()\n    const elements = this.board.selection\n    // 获取最大宽高，若一个元素，则取该元素的 BBOX，多个元素则取 AABB 的并集\n    if (!elements) return\n    for (let element of elements) {\n      const { transform } = element\n      if (!this.activeMap.has(element.id)) {\n        let ele = this.board.svgdoc.createElementNS(\n          NS.SVG,\n          \"path\"\n        ) as SVGPathElement\n        this.activeMap.set(element.id, ele)\n        this.activeGroup.append(ele)\n        setAttr(ele, {\n          id: element.id,\n          fill: \"none\",\n          stroke: config.COLOR_SELECT,\n          \"stroke-width\": \"2.5\",\n          \"fill-opacity\": \"0.15\",\n          display: \"none\",\n        })\n      }\n      // 计算 path 各个点，并导出成字符串\n      let ps = [\n        Vector2.zeros(),\n        new Vector2(0, 1),\n        Vector2.ones(),\n        new Vector2(1, 0),\n      ]\n      ps.forEach((p) => p.applyTransform(transform))\n      let pathStr = \"M\" + ps.map((p) => p.x + \",\" + p.y).join(\"L\") + \"Z\"\n      setAttr(this.activeMap.get(element.id), {\n        display: \"inline\",\n        d: pathStr,\n      })\n    }\n    if (elements.length === 1) {\n      setAttr(this.manuplator, {\n        display: \"inline\",\n      })\n      let { box } = elements[0].area\n      let ps = box.toVector2()\n      ps.forEach((p) => p.applyTransform(elements[0].transform))\n\n      // 选中单个元素的框是和元素的框一致的\n      setAttr(this.manuplatorRect, {\n        display: \"none\",\n      })\n      const width = 6\n      let points = Array.from(this.manuplatorPoints.children)\n      // 操作框仅需要与旋转值保持同步\n      // FIX: 此处的旋转值还有一点问题\n      points.forEach((p, i) => {\n        setAttr(p, {\n          d: generatePathStr(\n            ps[i].x,\n            ps[i].y,\n            width,\n            elements[0].transform.rotation\n          ),\n        })\n      })\n    } else if (elements.length >= 2) {\n      // show the selector outside\n      setAttr(this.manuplator, {\n        display: \"inline\",\n      })\n      setAttr(this.manuplatorRect, {\n        display: \"inline\",\n      })\n      let { box } = this.board.selectionArea\n      let ps = box.toVector2()\n      let pathStr = `M${box.x},${box.y}L${box.x},${box.y2}L${box.x2},${box.y2}L${box.x2},${box.y}Z`\n      setAttr(this.manuplator.children[0], {\n        d: pathStr,\n      })\n      const width = 6\n      let points = Array.from(this.manuplatorPoints.children)\n      points.forEach((p, i) => {\n        setAttr(p, { d: generatePathStr(ps[i].x, ps[i].y, width) })\n      })\n    }\n  }\n\n  private clear() {\n    this.activeMap.forEach((e) => setAttr(e, { display: \"none\" }))\n  }\n}\n\nexport function generatePathStr(\n  x: number,\n  y: number,\n  width: number,\n  rotation?: number\n) {\n  let points = [\n    new Vector2(x - width / 2, y - width / 2),\n    new Vector2(x - width / 2, y + width / 2),\n    new Vector2(x + width / 2, y + width / 2),\n    new Vector2(x + width / 2, y - width / 2),\n  ]\n  if (rotation) {\n    points.forEach((p) =>\n      p.applyTransform(Transform.identity().rotate(rotation, new Vector2(x, y)))\n    )\n  }\n  let pathStr = \"M\" + points.map((p) => p.x + \",\" + p.y).join(\"L\") + \"Z\"\n  return pathStr\n}\n","import { BaseElement } from \"./BaseElement\"\nimport { ELLIPSE } from \"./Ellipse\"\nimport { BoardEvent, EventEmitter } from \"./EventEmitter\"\nimport { NS } from \"./namespaces\"\nimport { Rect } from \"./Rect\"\nimport { generateSvgElement, setAttr } from \"./utilities\"\nimport { Selector } from \"./Selector\"\nimport { Log } from \"./Log\"\nimport { Area } from \"./Area\"\nimport { Box } from \"./Box\"\nimport { Transform } from \"./Transform\"\nimport { Vector2 } from \"./Vector\"\nimport { MouseStatusManager } from \"./MouseStatusManager\"\n\nexport class Board {\n  private saveOptions: any\n  private _selection: BaseElement[]\n  fx: number\n  fy: number\n  lastSelectionArea: Area\n  public get selection(): BaseElement[] {\n    return this._selection\n  }\n  public set selection(value: BaseElement[]) {\n    this._selection = value\n  }\n  private _selectionArea: Area\n  public get selectionArea(): Area {\n    return this._selectionArea\n  }\n  public set selectionArea(value: Area) {\n    this._selectionArea = value\n  }\n  private plugins: any[]\n  private currentMode: EditorMode\n  private currentResizeMode: ResizeMode\n  private rubberBox: HTMLElement\n  private curBBoxes: any[]\n  private selector: Selector\n  private _container: HTMLElement\n  public get container(): HTMLElement {\n    return this._container\n  }\n  public set container(value: HTMLElement) {\n    this._container = value\n  }\n  private _elements: BaseElement[]\n  public get elements(): BaseElement[] {\n    return this._elements\n  }\n  public set elements(value: BaseElement[]) {\n    this._elements = value\n  }\n  private _svgdoc: Document\n  private _eventEmitter: EventEmitter\n  private _cachedEvent: BoardEvent\n\n  private mouseStatusManager: MouseStatusManager\n\n  private boardX = 0\n  private boardY = 0\n\n  // mouse relative\n  // @todo: maybe not need this\n  private MouseDown = false\n  private mouseStartX = 0\n  private mouseStartY = 0\n  private lastZIndex = 0\n  private currentCreateMode: CreateMode\n\n  public get eventEmitter(): EventEmitter {\n    return this._eventEmitter\n  }\n  public set eventEmitter(value: EventEmitter) {\n    this._eventEmitter = value\n  }\n  public get svgdoc(): Document {\n    return this._svgdoc\n  }\n  public set svgdoc(value: Document) {\n    this._svgdoc = value\n  }\n  private _svgroot: SVGElement\n  public get svgroot(): SVGElement {\n    return this._svgroot\n  }\n  public set svgroot(value: SVGElement) {\n    this._svgroot = value\n  }\n  private svgcontent: SVGElement\n  public static idPrefix = \"svg\"\n  private curConfig: any\n  private canvasBg: SVGElement\n\n  // @todo: 此处存放一些交互时需要暂存的信息，后续看下怎么优化\n  private selectionTransforms: Transform[]\n  private lastFrameWidth: number\n  private lastFrameHeight: number\n\n  constructor(container: HTMLElement) {\n    this.saveOptions = {}\n    this.selection = []\n    this.selectionArea = new Area(new Box(0, 0, 1, 1), Transform.identity())\n    this.plugins = []\n    this.currentMode = EditorMode.SELECT\n    this.currentResizeMode = ResizeMode.CASUAL\n    this.rubberBox = null\n    this.curBBoxes = []\n    this.curConfig = {\n      dimensions: [800, 600],\n    }\n    this.elements = []\n    this.selectionTransforms = []\n\n    this._eventEmitter = new EventEmitter()\n    this._cachedEvent = new BoardEvent(\"\", null)\n    this.mouseStatusManager = new MouseStatusManager(this)\n\n    this.container = container\n    this.svgdoc = document\n\n    this.updateBoardPosition()\n\n    this.svgroot = this.svgdoc.createElementNS(NS.SVG, \"svg\") as SVGElement\n\n    const svgAttributs = {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      id: \"svgroot\",\n      xlinks: \"http://www.w3.org/1999/xlink\",\n      width: this.curConfig.dimensions[0],\n      height: this.curConfig.dimensions[1],\n      overflow: \"visible\",\n    }\n    Object.keys(svgAttributs).forEach((key) => {\n      this.svgroot.setAttribute(key, svgAttributs[key])\n    })\n\n    const bgAttributes = {\n      id: \"svgBg\",\n      width: this.curConfig.dimensions[0],\n      height: this.curConfig.dimensions[1],\n      stroke: \"#000\",\n      fill: \"#fbfbfb\",\n      style: \"pointer-events: none\",\n    }\n    this.canvasBg = generateSvgElement(this._svgdoc, bgAttributes)\n\n    const rect = this.svgdoc.createElementNS(NS.SVG, \"rect\") as SVGRectElement\n    const rectAttributes = {\n      id: \"blabla\",\n      width: \"100%\",\n      height: \"100%\",\n      stroke: \"#000\",\n      fill: \"#f8f8f8\",\n      style: \"pointer-events: none\",\n      x: 0,\n      y: 0,\n    }\n    Object.keys(rectAttributes).forEach((key) => {\n      rect.setAttribute(key, rectAttributes[key])\n    })\n    this.canvasBg.append(rect)\n\n    this.svgcontent = generateSvgElement(this.svgdoc, {\n      ...svgAttributs,\n      id: \"svgcontent\",\n    })\n\n    this.svgroot.append(this.canvasBg)\n    this.svgroot.append(this.svgcontent)\n    this.container.append(this.svgroot)\n\n    this.initSelector()\n\n    this.initEventHandler()\n    this.initCustomEventHandler()\n\n    // @todo: 传递画板的引用给元素，有没有更好的办法？？\n    ;(window as any).board = this\n  }\n\n  private initSelector() {\n    this.selector = new Selector(this)\n  }\n\n  private initEventHandler() {\n    // @todo: maybe 需要监听画板是否加载完成，后续优化\n    this.container.addEventListener(\n      \"mousedown\",\n      this.handleMouseDown.bind(this)\n    )\n    this.container.addEventListener(\"mouseup\", this.handleMouseUp.bind(this))\n    this.container.addEventListener(\"click\", this.handleClick.bind(this))\n    this.container.addEventListener(\"dblclick\", this.handleDBClick.bind(this))\n    this.container.addEventListener(\n      \"mousemove\",\n      this.handleMouseMove.bind(this)\n    )\n    document.addEventListener(\"resize\", () => {\n      this.updateBoardPosition()\n    })\n    this.container.addEventListener(\"keydown\", this.handleKeyDown.bind(this))\n  }\n\n  private initCustomEventHandler() {\n    this._eventEmitter.on(\"selectStart\", this.onSelectStart.bind(this))\n    this._eventEmitter.on(\"createElement\", this.onCreateElement.bind(this))\n    this._eventEmitter.on(\"creating\", this.onCreateMove.bind(this))\n    this._eventEmitter.on(\"createEnd\", this.onCreateEnd.bind(this))\n    this._eventEmitter.on(\"changeMode\", this.onChangeMode.bind(this))\n    this._eventEmitter.on(\"dragStart\", this.onDragStart.bind(this))\n    this._eventEmitter.on(\"draging\", this.onDraging.bind(this))\n    this._eventEmitter.on(\"dragEnd\", this.onDragEnd.bind(this))\n    this._eventEmitter.on(\"rotateStart\", this.onRotateStart.bind(this))\n    this._eventEmitter.on(\"rotating\", this.onRotating.bind(this))\n    this._eventEmitter.on(\"rotateEnd\", this.onRotateEnd.bind(this))\n    this._eventEmitter.on(\"scaleStart\", this.onScaleStart.bind(this))\n    this._eventEmitter.on(\"scaling\", this.onScaling.bind(this))\n    this._eventEmitter.on(\"scaleEnd\", this.onScaleEnd.bind(this))\n    this._eventEmitter.on(\n      \"mouseStatusChange\",\n      this.onMouseStatusChange.bind(this)\n    )\n    // 封装一层，获取鼠标相对 x,y\n    this._eventEmitter.on(\"mouseDown\", this.onMouseDown.bind(this))\n    this._eventEmitter.on(\"mouseMove\", this.onMouseMove.bind(this))\n    this._eventEmitter.on(\"mouseUp\", this.onMouseUp.bind(this))\n  }\n\n  private updateBoardPosition() {\n    let bbox = this.container.getBoundingClientRect()\n    this.boardX = bbox.x\n    this.boardY = bbox.y\n  }\n\n  public exportSvg(): string {\n    return \"\"\n  }\n\n  // @todo: 这个方法修饰符应该设置成 private or protected\n  public setSelected(elements: BaseElement[]) {\n    console.log(elements)\n    this.selection = elements\n    let eventType = \"elementSelected\"\n    if (!elements || elements.length == 0) {\n      eventType = \"nothingSelected\"\n    } else {\n      // elements.forEach((e) => console.log(e.id, e.transform.a))\n      this.updateSelectionArea()\n      this._cachedEvent.customData = {\n        elements,\n        area: this.selectionArea,\n      }\n    }\n    // @todo: create new events derived from BoardEvent\n    this._eventEmitter.trigger(eventType, [this._cachedEvent])\n  }\n\n  private setMode(mode: EditorMode) {\n    this.currentMode = mode\n    this._cachedEvent.customData = {\n      mode,\n    }\n    this._eventEmitter.trigger(\"changeMode\", [this._cachedEvent])\n  }\n\n  private updateSelectionArea() {\n    let elements = this.selection\n    // calculate area\n    if (elements.length == 1) {\n      this.selectionArea.transform = elements[0].transform.clone()\n      this.selectionArea.box = new Box(0, 0, 1, 1)\n    } else {\n      this.selectionArea.transform.reset()\n      this.selectionArea.box = Box.mergeAll(elements.map((e) => e.AABB))\n      // console.log(elements[0].transform)\n      // console.log(elements[1].transform)\n      // console.log(elements.map((e) => e.AABB))\n      // console.log(this.selectionArea.box)\n    }\n  }\n\n  // original events\n  protected handleMouseDown(e: MouseEvent) {\n    this.mouseStartX = e.clientX - this.boardX\n    this.mouseStartY = e.clientY - this.boardY\n\n    this._cachedEvent.mouseEvent = e\n    this._cachedEvent.customData || (this._cachedEvent.customData = {})\n    this._cachedEvent.customData.x = this.mouseStartX\n    this._cachedEvent.customData.y = this.mouseStartY\n    this._eventEmitter.trigger(\"mouseDown\", [this._cachedEvent])\n  }\n  protected handleMouseMove(e: MouseEvent) {\n    let [x, y] = [e.clientX - this.boardX, e.clientY - this.boardY]\n    this._cachedEvent.mouseEvent = e\n\n    this._cachedEvent.customData || (this._cachedEvent.customData = {})\n    this._cachedEvent.customData.x = x\n    this._cachedEvent.customData.y = y\n    this._eventEmitter.trigger(\"mouseMove\", [this._cachedEvent])\n  }\n  protected handleMouseUp(e: MouseEvent) {\n    this._cachedEvent.mouseEvent = e\n    this._cachedEvent.customData.x = e.clientX - this.boardX\n    this._cachedEvent.customData.y = e.clientY - this.boardY\n    this._eventEmitter.trigger(\"mouseUp\", [this._cachedEvent])\n  }\n  protected handleClick(e: MouseEvent) {}\n  protected handleDBClick(e: MouseEvent) {}\n  protected handleKeyDown(e: KeyboardEvent) {\n    switch (e.key) {\n      case \"r\":\n        this.setMode(EditorMode.CREATE)\n        this.currentCreateMode = CreateMode.RECT\n        break\n      case \"o\":\n        this.setMode(EditorMode.CREATE)\n        this.currentCreateMode = CreateMode.ELLIPSE\n        break\n      case \"l\":\n        this.setMode(EditorMode.CREATE)\n        this.currentCreateMode = CreateMode.LINE\n        break\n      case \"v\":\n        this.setMode(EditorMode.SELECT)\n        this.currentCreateMode = CreateMode.LINE\n        break\n    }\n  }\n\n  // custom events\n  private onMouseDown(e: BoardEvent) {\n    console.log(\"function onMouseDown...\")\n    this.MouseDown = true\n    if (this.currentMode === EditorMode.CREATE) {\n      this._cachedEvent.name = \"createElement\"\n      this._cachedEvent.customData = {\n        type: this.currentCreateMode,\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n      }\n      this._eventEmitter.trigger(\"createElement\", [this._cachedEvent])\n      return\n    }\n    console.log(\"not create mode...\")\n    if (this.mouseStatusManager.mouseStatus == MouseStatus.ROTATE) {\n      this.setMode(EditorMode.ROTATE)\n      return\n    }\n    console.log(\"not rotate mode...\")\n    if (this.mouseStatusManager.mouseStatus == MouseStatus.SCALE) {\n      this.setMode(EditorMode.SCALE)\n      return\n    }\n    console.log(\"not scale mode...\")\n    // 若点击在选中物体范围内则进入拖拽模式(enter drag mode if mouse down on the selected area)\n    if (\n      this.selection &&\n      this.selection.length >= 1 &&\n      this.clickOnSelectedArea(e)\n    ) {\n      this.setMode(EditorMode.DRAG)\n    } else {\n      if (\n        this.clickOnElement(new Vector2(this.mouseStartX, this.mouseStartY))\n      ) {\n        this.setMode(EditorMode.DRAG)\n      } else {\n        this.setMode(EditorMode.SELECT)\n        this._cachedEvent.name = \"selectStart\"\n        this._eventEmitter.trigger(\"selectStart\", [this._cachedEvent])\n      }\n    }\n  }\n  private onMouseMove(e: BoardEvent) {\n    if (this.currentMode === EditorMode.CREATE && this.MouseDown) {\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.customData.x,\n        endY: e.customData.y,\n      }\n      this._eventEmitter.trigger(\"creating\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.DRAG) {\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.customData.x,\n        endY: e.customData.y,\n      }\n      this._eventEmitter.trigger(\"draging\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.ROTATE) {\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.customData.x,\n        endY: e.customData.y,\n      }\n      this._eventEmitter.trigger(\"rotating\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.SCALE) {\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.customData.x,\n        endY: e.customData.y,\n      }\n      this._eventEmitter.trigger(\"scaling\", [this._cachedEvent])\n    } else if (this.MouseDown) {\n      this._cachedEvent.customData = {\n        startX: this.mouseStartX,\n        startY: this.mouseStartY,\n        endX: e.customData.x,\n        endY: e.customData.y,\n      }\n      this._eventEmitter.trigger(\"selectMove\", [this._cachedEvent])\n    }\n  }\n  private onMouseUp(e: BoardEvent) {\n    this.MouseDown = false\n    if (this.currentMode === EditorMode.CREATE) {\n      this._eventEmitter.trigger(\"createEnd\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.SELECT) {\n      this._eventEmitter.trigger(\"selectEnd\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.ROTATE) {\n      this._eventEmitter.trigger(\"rotateEnd\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.DRAG) {\n      this._eventEmitter.trigger(\"dragEnd\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.SCALE) {\n      this._eventEmitter.trigger(\"scaleEnd\", [this._cachedEvent])\n    }\n    this.currentMode = EditorMode.SELECT\n  }\n\n  private onSelectStart(e: BoardEvent) {}\n  private onSelectMove(e: BoardEvent) {}\n  private onSelectEnd(e: BoardEvent) {}\n\n  private onCreateElement(e: BoardEvent) {\n    const { mouseEvent, customData } = e\n    console.log(customData.type)\n    switch (customData.type) {\n      case CreateMode.RECT:\n        let rect = new Rect(customData.startX, customData.startY, 0, 0)\n        this.svgcontent.append(rect.domInstance)\n        this.elements.push(rect)\n        this.setSelected([rect])\n        break\n      case CreateMode.ELLIPSE:\n        let ellipse = new ELLIPSE(customData.startX, customData.startY, 0, 0)\n        this.svgcontent.append(ellipse.domInstance)\n        this.elements.push(ellipse)\n        this.setSelected([ellipse])\n        break\n      default:\n        Log.Error(\"error insert mode\")\n    }\n  }\n  private onCreateMove(e: BoardEvent) {\n    this.updateSelectionArea()\n    console.log(this.selection)\n    if (this.container.className) this.container.className = \"\"\n    console.log(\"handle create move...\")\n    const { mouseEvent, customData } = e\n    let [width, height] = [\n      Math.abs(customData.endX - customData.startX),\n      Math.abs(customData.endY - customData.startY),\n    ]\n    console.log(width, height)\n    // 元素的实际位置和大小由 Box（0，0，1，1）与 transform 结合表示\n    this.selection[0].transform.a = width\n    this.selection[0].transform.d = height\n    this.selection[0].transform.e = Math.min(customData.endX, customData.startX)\n    this.selection[0].transform.f = Math.min(customData.endY, customData.startY)\n    this.selection[0].updateRendering()\n  }\n  private onCreateEnd(e: BoardEvent) {\n    console.log(\"create element end...\")\n  }\n  private onDragStart(e: BoardEvent) {\n    this.selectionTransforms = this.selection.map((n) => n.transform.clone())\n  }\n  private onDraging(e: BoardEvent) {\n    const { mouseEvent, customData } = e\n    const { startX, startY, endX, endY } = customData\n    // @todo: 需要记录 drag 之前的 transform 信息\n    this.selection.forEach((n, index) => {\n      n.transform.e = this.selectionTransforms[index].e + endX - startX\n      n.transform.f = this.selectionTransforms[index].f + endY - startY\n      n.updateRendering()\n    })\n    this.updateSelectionArea()\n  }\n  private onDragEnd(e: BoardEvent) {}\n\n  private onRotateStart(e: BoardEvent) {\n    this.selectionTransforms = this.selection.map((n) => n.transform.clone())\n    this.lastSelectionArea = this.selectionArea.clone()\n  }\n  private onRotating(e: BoardEvent) {\n    const { mouseEvent, customData } = e\n    const { startX, startY, endX, endY } = customData\n    let center = this.lastSelectionArea.center()\n    let a = new Vector2(startX - center.x, startY - center.y)\n    let b = new Vector2(endX - center.x, endY - center.y)\n    let theta = a.angle(b)\n    let flag = a.crossMultiply(b)\n\n    theta = flag > 0 ? theta : Math.PI * 2 - theta\n    this.selection.forEach((n, index) => {\n      n.transform.copy(\n        this.selectionTransforms[index].clone().rotate(theta, center)\n      )\n      n.updateRendering()\n    })\n    this.updateSelectionArea()\n  }\n  private onRotateEnd(e: BoardEvent) {\n    this.updateSelectionArea()\n  }\n\n  private onScaleStart(e: BoardEvent) {\n    // @todo: 还没考虑多选情况\n    this.lastFrameWidth = this.selection[0].frameWidth\n    this.lastFrameHeight = this.selection[0].frameHeight\n    this.selectionTransforms = this.selection.map((n) => n.transform.clone())\n    this.lastSelectionArea = this.selectionArea.clone()\n    let fx = 1\n    let fy = 1\n    switch (this.mouseStatusManager.cornerType) {\n      default:\n      case DIRECTION.RB:\n        break\n      case DIRECTION.RT:\n        fy = -1\n        break\n      case DIRECTION.LB:\n        fx = -1\n        break\n      case DIRECTION.LT:\n        fx = fy = -1\n        break\n    }\n    this.fx = fx\n    this.fy = fy\n  }\n  private onScaling(e: BoardEvent) {\n    const { mouseEvent, customData } = e\n    const { startX, startY, endX, endY } = customData\n    let start = new Vector2(startX, startY)\n    let end = new Vector2(endX, endY)\n\n    let fx = this.fx\n    let fy = this.fy\n\n    // @todo: 待优化，这里看下怎么复用下两种情况下的代码\n    if (this.selection.length == 1) {\n      let n = this.selection[0]\n      let a = start\n        .clone()\n        .applyTransform(this.selectionTransforms[0].inverse())\n      let b = end.clone().applyTransform(this.selectionTransforms[0].inverse())\n      b.subtract(a)\n\n      // avoid the value become 0\n      let [x, y] = [fx * b.x + 1, fy * b.y + 1]\n      let [absx, absy] = [\n        Math.max(Math.abs(x), 0.001),\n        Math.max(Math.abs(y), 0.001),\n      ]\n      x = x < 0 ? -absx : absx\n      y = y < 0 ? -absy : absy\n      n.transform.copy(\n        this.selectionTransforms[0]\n          .clone()\n          .scale(x, y, new Vector2(fx == -1 ? 1 : 0, fy == -1 ? 1 : 0))\n      )\n      n.updateRendering()\n    } else {\n      // 以下只适合多选\n      let [tw, th] = [\n        this.lastSelectionArea.box.w,\n        this.lastSelectionArea.box.h,\n      ]\n      let v = end.subtract(start)\n      let [x, y] = [(fx * v.x) / tw + 1, (fy * v.y) / th + 1]\n      let [absx, absy] = [\n        Math.max(Math.abs(x), 0.001),\n        Math.max(Math.abs(y), 0.001),\n      ]\n      x = x < 0 ? -absx : absx\n      y = y < 0 ? -absy : absy\n      let box = this.lastSelectionArea.box\n      let rotateCenter = new Vector2(box.x, box.y).add(\n        new Vector2(fx == -1 ? box.w : 0, fy == -1 ? box.h : 0)\n      )\n\n      this.selection.forEach((n, index) => {\n        n.transform.copy(\n          this.selectionTransforms[index].clone().scale2(x, y, rotateCenter)\n        )\n        n.updateRendering()\n      })\n    }\n    this.updateSelectionArea()\n  }\n  private onScaleEnd(e: BoardEvent) {\n    this.updateSelectionArea()\n  }\n\n  private onChangeMode(e: BoardEvent) {\n    const { customData } = e\n    console.log(\"change mode:\", customData.mode)\n    if (customData.mode === EditorMode.SELECT) {\n      this.setSelected([])\n    } else if (this.currentMode === EditorMode.CREATE) {\n      this.container.className = \"cursor-crosshair\"\n    } else if (this.currentMode == EditorMode.DRAG) {\n      this._cachedEvent.customData = {\n        transforms: this.selectionTransforms,\n      }\n      this._eventEmitter.trigger(\"dragStart\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.ROTATE) {\n      this._cachedEvent.customData = {\n        transforms: this.selectionTransforms,\n      }\n      this._eventEmitter.trigger(\"rotateStart\", [this._cachedEvent])\n    } else if (this.currentMode == EditorMode.SCALE) {\n      this._cachedEvent.customData = {\n        transforms: this.selectionTransforms,\n      }\n      this._eventEmitter.trigger(\"scaleStart\", [this._cachedEvent])\n    }\n  }\n\n  private onMouseStatusChange(e: BoardEvent) {}\n\n  private clickOnSelectedArea(e: BoardEvent) {\n    return this.selectionArea.include(\n      new Vector2(e.customData.x, e.customData.y)\n    )\n  }\n\n  private clickOnElement(pos) {\n    // @todo: 给每个元素设置一个 Area 属性\n    let element = this.elements\n      .sort((a, b) => (a.zIndex > b.zIndex ? 1 : -1))\n      .find((e) => {\n        return new Area(new Box(0, 0, 1, 1), e.transform).include(pos)\n      })\n    this.setSelected(element ? [element] : [])\n    console.log(\"into function clickONElement\")\n    element && console.log(\"click on:\", element.id)\n    return !!element\n  }\n}\n\nexport enum EditorMode {\n  SELECT = \"SELECT\",\n  DRAG = \"DRAG\",\n  ROTATE = \"ROTATE\",\n  SCALE = \"SCALE\",\n  CREATE = \"CREATE\",\n  DRAW = \"DRAW\",\n}\n\nexport enum CreateMode {\n  RECT = \"RECT\",\n  ELLIPSE = \"ELLIPsE\",\n  LINE = \"LINE\",\n}\n\nexport enum ResizeMode {\n  CASUAL,\n  SCALE,\n}\n\nexport enum MouseStatus {\n  SELECT = \"SELECT\",\n  DRAG = \"DRAG\",\n  SCALE = \"SCALE\",\n  ROTATE = \"ROTATE\",\n}\n\nexport enum DIRECTION {\n  LT,\n  LM,\n  LB,\n  CT,\n  CM,\n  CB,\n  RT,\n  RM,\n  RB,\n}\n","import { Board, DIRECTION, MouseStatus } from \"./Board\"\nimport { BoardEvent } from \"./EventEmitter\"\nimport { Log } from \"./Log\"\nimport { Manager } from \"./Manager\"\nimport { Vector2 } from \"./Vector\"\n\nexport class MouseStatusManager extends Manager {\n  private _mouseStatus: MouseStatus\n  private _cachedEvent: BoardEvent\n\n  private _cornerType: DIRECTION\n  public get cornerType(): DIRECTION {\n    return this._cornerType\n  }\n  public set cornerType(value: DIRECTION) {\n    this._cornerType = value\n  }\n\n  public get mouseStatus(): MouseStatus {\n    return this._mouseStatus\n  }\n  public set mouseStatus(value: MouseStatus) {\n    if (this._mouseStatus === value) return\n    // console.log(this._mouseStatus)\n    this._mouseStatus = value\n    this._cachedEvent.customData.mouseStatus = value\n    this.eventEmitter.trigger(\"mouseStatusChange\", [this._cachedEvent])\n  }\n\n  constructor(board: Board) {\n    super(board)\n\n    this._cachedEvent = new BoardEvent(\"mouseStatusChange\", null)\n    this._cachedEvent.customData = {}\n\n    this.eventEmitter.on(\n      \"mouseStatusChange\",\n      this.onMouseStatusChange.bind(this)\n    )\n  }\n\n  public override onMouseDown(e: BoardEvent): void {\n    Log.blue(\"mouse down in MouseStatusManager...\")\n  }\n  public override onMouseMove(e: BoardEvent): void {\n    this.updateMouseStatus(e)\n  }\n  public override onMouseUp(e: BoardEvent): void {}\n\n  private onMouseStatusChange(e: BoardEvent) {\n    const { customData } = e\n    switch (customData.mouseStatus) {\n      default:\n      case MouseStatus.DRAG:\n        this.board.container.className = \"\"\n        break\n      case MouseStatus.ROTATE:\n        this.board.container.className = \"cursor-rotate\"\n        break\n      case MouseStatus.SCALE:\n        this.board.container.className = \"cursor-resize\"\n        break\n    }\n  }\n\n  private updateMouseStatus(e: BoardEvent) {\n    if (!this.board.selection || this.board.selection.length < 1) return false\n    let { x, y } = e.customData\n    let distances = this.board.selectionArea.nearestCornerDistance(\n      new Vector2(x, y)\n    )\n    let dis = Infinity,\n      index = -1\n    distances.forEach((d, i) => {\n      if (d < dis) {\n        dis = d\n        index = i\n      }\n    })\n    switch (index) {\n      case 0:\n        this.cornerType = DIRECTION.LT\n        break\n      case 1:\n        this.cornerType = DIRECTION.LB\n        break\n      case 2:\n        this.cornerType = DIRECTION.RB\n        break\n      case 3:\n        this.cornerType = DIRECTION.RT\n        break\n    }\n\n    if (dis < 5) {\n      this.mouseStatus = MouseStatus.SCALE\n    } else if (dis < 10) {\n      this.mouseStatus = MouseStatus.ROTATE\n      // @todo: finish this\n    } else if (false) {\n      this.mouseStatus = MouseStatus.DRAG\n    } else {\n      this.mouseStatus = MouseStatus.SELECT\n    }\n  }\n}\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { Board } from \"./svgBoard\"\nimport \"./index.css\"\nconsole.log(\"entry index.ts\")\n\nlet board = new Board(document.body)\n"],"names":["___CSS_LOADER_URL_IMPORT_0___","URL","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","url","options","String","__esModule","default","test","slice","hash","needQuotes","replace","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","n","getter","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","p","b","baseURI","self","location","href","nc","x","y","_x","_y","value","Math","sqrt","ones","Vector2","zeros","add","v","subtract","dotMultiply","crossMultiply","angle","acos","min","mod","distance","pow","rotateAtOrigin","theta","cos","sin","applyTransform","transform","c","f","opposite","clone","w","h","_w","_h","set","box","set4","setSize","Box","merge","mergeAll","boxes","minx","maxx","max","miny","center","toVector2","y2","x2","message","console","error","blue","info","red","t","PI","Transform","fromAngle","rotation","identity","from","setFromArray","arr","copy","reset","translate","translate2","radius","sina","cosa","rightMultiply","rotate","scale","scaleAtOrigin","scale2","scale2AtOrigin","flipY","x1","tm","leftMultiply","inverse","detA","cssString","tranform","_box","_transform","Area","include","pp","nearestCornerDistance","NS","generateSvgElement","docuemnt","ele","createElementNS","keys","forEach","setAttr","attr","board","AABB","area","zIndex","eventEmitter","on","onCreateStart","bind","onCreating","onCreateEnd","_id","_area","_domInstance","createDomInstance","_AABB","_zIndex","_points","Log","selection","updatePoints","corners","points","updateAABB","minX","minY","maxX","maxY","Default","width","height","cx","cy","rx","ry","fill","updateAttr","updateRendering","BaseElement","callbacks","name","callback","warn","off","Array","trigger","_args","args","mouseEvent","_name","_mouseEvent","_customData","frameWidth","frameHeight","onMouseDown","onMouseMove","onMouseUp","container","svgroot","selectorRoot","svgdoc","selectRect","activeGroup","append","activeMap","Map","manuplator","display","manuplatorRect","stroke","manuplatorPoints","point","lastSelectedNum","selectArea","onSelectStart","onSelectMove","onSelectEnd","onElemetSelected","onNothingSelected","onDraging","onRotating","onScaling","customData","startX","endX","startY","endY","abs","selected","elements","find","setSelected","updateRender","onDragStart","onElementCreateing","rect","updateSelector","clear","has","ps","pathStr","children","generatePathStr","selectionArea","Manager","EditorMode","CreateMode","ResizeMode","MouseStatus","DIRECTION","_cachedEvent","BoardEvent","onMouseStatusChange","_cornerType","_mouseStatus","mouseStatus","updateMouseStatus","DRAG","className","ROTATE","SCALE","distances","dis","Infinity","cornerType","LT","LB","RB","RT","SELECT","boardX","boardY","MouseDown","mouseStartX","mouseStartY","lastZIndex","saveOptions","plugins","currentMode","currentResizeMode","CASUAL","rubberBox","curBBoxes","curConfig","dimensions","selectionTransforms","_eventEmitter","EventEmitter","mouseStatusManager","MouseStatusManager","updateBoardPosition","svgAttributs","xmlns","xlinks","overflow","bgAttributes","canvasBg","_svgdoc","rectAttributes","svgcontent","initSelector","initEventHandler","initCustomEventHandler","_selection","_selectionArea","_container","_elements","_svgroot","selector","Selector","addEventListener","handleMouseDown","handleMouseUp","handleClick","handleDBClick","handleMouseMove","handleKeyDown","onCreateElement","onCreateMove","onChangeMode","onDragEnd","onRotateStart","onRotateEnd","onScaleStart","onScaleEnd","bbox","getBoundingClientRect","exportSvg","log","eventType","updateSelectionArea","setMode","mode","clientX","clientY","CREATE","currentCreateMode","RECT","ELLIPSE","LINE","type","clickOnSelectedArea","clickOnElement","Rect","domInstance","ellipse","lastSelectionArea","flag","lastFrameWidth","lastFrameHeight","fx","fy","start","end","absx","absy","tw","th","transforms","pos","sort","idPrefix","Board","body"],"sourceRoot":""}